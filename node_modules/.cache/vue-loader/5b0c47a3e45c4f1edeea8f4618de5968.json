{"remainingRequest":"D:\\test frontend system\\vue-admin-template-master\\vue-admin-template-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\test frontend system\\vue-admin-template-master\\vue-admin-template-master\\src\\views\\email\\send.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\test frontend system\\vue-admin-template-master\\vue-admin-template-master\\src\\views\\email\\send.vue","mtime":1705127333091},{"path":"D:\\test frontend system\\vue-admin-template-master\\vue-admin-template-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\test frontend system\\vue-admin-template-master\\vue-admin-template-master\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\test frontend system\\vue-admin-template-master\\vue-admin-template-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\test frontend system\\vue-admin-template-master\\vue-admin-template-master\\node_modules\\vue-loader\\lib\\index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IHNlbmQgfSBmcm9tICdAL2FwaS9lbWFpbCcKaW1wb3J0IHsgdXBsb2FkIH0gZnJvbSAnQC91dGlscy91cGxvYWQnCmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JwppbXBvcnQgRSBmcm9tICd3YW5nZWRpdG9yJwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0luZGV4JywKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbG9hZGluZzogZmFsc2UsIGZvcm06IHsgc3ViamVjdDogJycsIHRvczogJycsIGNvbnRlbnQ6ICcnIH0sCiAgICAgIHJ1bGVzOiB7CiAgICAgICAgc3ViamVjdDogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+agh+mimOS4jeiDveS4uuepuicsIHRyaWdnZXI6ICdibHVyJyB9CiAgICAgICAgXSwKICAgICAgICB0b3M6IFsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfmlLbku7bkurrkuI3og73kuLrnqbonLCB0cmlnZ2VyOiAnYmx1cicgfQogICAgICAgIF0KICAgICAgfQogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcEdldHRlcnMoWwogICAgICAnaW1hZ2VzVXBsb2FkQXBpJywKICAgICAgJ2Jhc2VBcGknCiAgICBdKQogIH0sCiAgbW91bnRlZCgpIHsKICAgIGNvbnN0IF90aGlzID0gdGhpcwogICAgdmFyIGVkaXRvciA9IG5ldyBFKHRoaXMuJHJlZnMuZWRpdG9yKQogICAgLy8g6Ieq5a6a5LmJ6I+c5Y2V6YWN572uCiAgICBlZGl0b3IuY29uZmlnLnpJbmRleCA9IDEwCiAgICAvLyDmlofku7bkuIrkvKAKICAgIGVkaXRvci5jb25maWcuY3VzdG9tVXBsb2FkSW1nID0gZnVuY3Rpb24oZmlsZXMsIGluc2VydCkgewogICAgICAvLyBmaWxlcyDmmK8gaW5wdXQg5Lit6YCJ5Lit55qE5paH5Lu25YiX6KGoCiAgICAgIC8vIGluc2VydCDmmK/ojrflj5blm77niYcgdXJsIOWQju+8jOaPkuWFpeWIsOe8lui+keWZqOeahOaWueazlQogICAgICBmaWxlcy5mb3JFYWNoKGltYWdlID0+IHsKICAgICAgICB1cGxvYWQoX3RoaXMuaW1hZ2VzVXBsb2FkQXBpLCBpbWFnZSkudGhlbihyZXMgPT4gewogICAgICAgICAgY29uc3QgZGF0YSA9IHJlcy5kYXRhCiAgICAgICAgICBjb25zdCB1cmwgPSBfdGhpcy5iYXNlQXBpICsgJy9maWxlLycgKyBkYXRhLnR5cGUgKyAnLycgKyBkYXRhLnJlYWxOYW1lCiAgICAgICAgICBpbnNlcnQodXJsKQogICAgICAgIH0pCiAgICAgIH0pCiAgICB9CiAgICBlZGl0b3IuY29uZmlnLm9uY2hhbmdlID0gKGh0bWwpID0+IHsKICAgICAgdGhpcy5mb3JtLmNvbnRlbnQgPSBodG1sCiAgICB9CiAgICBlZGl0b3IuY3JlYXRlKCkKICB9LAogIG1ldGhvZHM6IHsKICAgIGRvU3VibWl0KCkgewogICAgICB0aGlzLiRyZWZzWydmb3JtJ10udmFsaWRhdGUoKHZhbGlkKSA9PiB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlCiAgICAgICAgICBzZW5kKHRoaXMuZm9ybSkudGhlbihyZXMgPT4gewogICAgICAgICAgICB0aGlzLiRub3RpZnkoewogICAgICAgICAgICAgIHRpdGxlOiAn5Y+R6YCB5oiQ5YqfJywKICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgICAgZHVyYXRpb246IDI1MDAKICAgICAgICAgICAgfSkKICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2UKICAgICAgICAgIH0pLmNhdGNoKGVyciA9PiB7CiAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlCiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVyci5yZXNwb25zZS5kYXRhLm1lc3NhZ2UpCiAgICAgICAgICB9KQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgICB9CiAgICAgIH0pCiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["send.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAgBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"send.vue","sourceRoot":"src/views/email","sourcesContent":["<template>\r\n    <div>\r\n      <el-form ref=\"form\" :model=\"form\" :rules=\"rules\" style=\"margin-top: 6px;\" size=\"small\" label-width=\"100px\">\r\n        <el-form-item label=\"邮件标题\" prop=\"subject\">\r\n          <el-input v-model=\"form.subject\" style=\"width: 646px\" placeholder=\"请输入邮件标题，标题不能为空\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"收件地址\" prop=\"tos\">\r\n          <el-input v-model=\"form.tos\" style=\"width: 646px\" placeholder=\"请输入收件地址，多个地址英文逗号,隔开\" />\r\n        </el-form-item>\r\n        <div ref=\"editor\" class=\"editor\" />\r\n        <el-button :loading=\"loading\" style=\"margin-left:1.6%;margin-bottom: 30px\" size=\"medium\" type=\"primary\" @click=\"doSubmit\">发送邮件</el-button>\r\n      </el-form>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import { send } from '@/api/email'\r\n  import { upload } from '@/utils/upload'\r\n  import { mapGetters } from 'vuex'\r\n  import E from 'wangeditor'\r\n  export default {\r\n    name: 'Index',\r\n    data() {\r\n      return {\r\n        loading: false, form: { subject: '', tos: '', content: '' },\r\n        rules: {\r\n          subject: [\r\n            { required: true, message: '标题不能为空', trigger: 'blur' }\r\n          ],\r\n          tos: [\r\n            { required: true, message: '收件人不能为空', trigger: 'blur' }\r\n          ]\r\n        }\r\n      }\r\n    },\r\n    computed: {\r\n      ...mapGetters([\r\n        'imagesUploadApi',\r\n        'baseApi'\r\n      ])\r\n    },\r\n    mounted() {\r\n      const _this = this\r\n      var editor = new E(this.$refs.editor)\r\n      // 自定义菜单配置\r\n      editor.config.zIndex = 10\r\n      // 文件上传\r\n      editor.config.customUploadImg = function(files, insert) {\r\n        // files 是 input 中选中的文件列表\r\n        // insert 是获取图片 url 后，插入到编辑器的方法\r\n        files.forEach(image => {\r\n          upload(_this.imagesUploadApi, image).then(res => {\r\n            const data = res.data\r\n            const url = _this.baseApi + '/file/' + data.type + '/' + data.realName\r\n            insert(url)\r\n          })\r\n        })\r\n      }\r\n      editor.config.onchange = (html) => {\r\n        this.form.content = html\r\n      }\r\n      editor.create()\r\n    },\r\n    methods: {\r\n      doSubmit() {\r\n        this.$refs['form'].validate((valid) => {\r\n          if (valid) {\r\n            this.loading = true\r\n            send(this.form).then(res => {\r\n              this.$notify({\r\n                title: '发送成功',\r\n                type: 'success',\r\n                duration: 2500\r\n              })\r\n              this.loading = false\r\n            }).catch(err => {\r\n              this.loading = false\r\n              console.log(err.response.data.message)\r\n            })\r\n          } else {\r\n            return false\r\n          }\r\n        })\r\n      }\r\n    }\r\n  }\r\n  </script>\r\n  \r\n  <style scoped>\r\n    .editor{\r\n      text-align:left;\r\n      margin: 20px;\r\n      width: 730px;\r\n    }\r\n   ::v-deep .w-e-text-container {\r\n      height: 360px !important;\r\n    }\r\n  </style>"]}]}