{"remainingRequest":"D:\\test frontend system\\vue-admin-template-master\\vue-admin-template-master\\node_modules\\babel-loader\\lib\\index.js!D:\\test frontend system\\vue-admin-template-master\\vue-admin-template-master\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\test frontend system\\vue-admin-template-master\\vue-admin-template-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\test frontend system\\vue-admin-template-master\\vue-admin-template-master\\src\\views\\email\\send.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\test frontend system\\vue-admin-template-master\\vue-admin-template-master\\src\\views\\email\\send.vue","mtime":1705126615922},{"path":"D:\\test frontend system\\vue-admin-template-master\\vue-admin-template-master\\babel.config.js","mtime":1637306514000},{"path":"D:\\test frontend system\\vue-admin-template-master\\vue-admin-template-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\test frontend system\\vue-admin-template-master\\vue-admin-template-master\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\test frontend system\\vue-admin-template-master\\vue-admin-template-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\test frontend system\\vue-admin-template-master\\vue-admin-template-master\\node_modules\\vue-loader\\lib\\index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiRDovdGVzdCBmcm9udGVuZCBzeXN0ZW0vdnVlLWFkbWluLXRlbXBsYXRlLW1hc3Rlci92dWUtYWRtaW4tdGVtcGxhdGUtbWFzdGVyL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBzZW5kIH0gZnJvbSAnQC9hcGkvdG9vbHMvZW1haWwnOwppbXBvcnQgeyB1cGxvYWQgfSBmcm9tICdAL3V0aWxzL3VwbG9hZCc7CmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JzsKaW1wb3J0IEUgZnJvbSAnd2FuZ2VkaXRvcic7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnSW5kZXgnLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgZm9ybTogewogICAgICAgIHN1YmplY3Q6ICcnLAogICAgICAgIHRvczogJycsCiAgICAgICAgY29udGVudDogJycKICAgICAgfSwKICAgICAgcnVsZXM6IHsKICAgICAgICBzdWJqZWN0OiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn5qCH6aKY5LiN6IO95Li656m6JywKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH1dLAogICAgICAgIHRvczogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+aUtuS7tuS6uuS4jeiDveS4uuepuicsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9XQogICAgICB9CiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoe30sIG1hcEdldHRlcnMoWydpbWFnZXNVcGxvYWRBcGknLCAnYmFzZUFwaSddKSksCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgdmFyIGVkaXRvciA9IG5ldyBFKHRoaXMuJHJlZnMuZWRpdG9yKTsgLy8g6Ieq5a6a5LmJ6I+c5Y2V6YWN572uCgogICAgZWRpdG9yLmNvbmZpZy56SW5kZXggPSAxMDsgLy8g5paH5Lu25LiK5LygCgogICAgZWRpdG9yLmNvbmZpZy5jdXN0b21VcGxvYWRJbWcgPSBmdW5jdGlvbiAoZmlsZXMsIGluc2VydCkgewogICAgICAvLyBmaWxlcyDmmK8gaW5wdXQg5Lit6YCJ5Lit55qE5paH5Lu25YiX6KGoCiAgICAgIC8vIGluc2VydCDmmK/ojrflj5blm77niYcgdXJsIOWQju+8jOaPkuWFpeWIsOe8lui+keWZqOeahOaWueazlQogICAgICBmaWxlcy5mb3JFYWNoKGZ1bmN0aW9uIChpbWFnZSkgewogICAgICAgIHVwbG9hZChfdGhpcy5pbWFnZXNVcGxvYWRBcGksIGltYWdlKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIHZhciBkYXRhID0gcmVzLmRhdGE7CiAgICAgICAgICB2YXIgdXJsID0gX3RoaXMuYmFzZUFwaSArICcvZmlsZS8nICsgZGF0YS50eXBlICsgJy8nICsgZGF0YS5yZWFsTmFtZTsKICAgICAgICAgIGluc2VydCh1cmwpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH07CgogICAgZWRpdG9yLmNvbmZpZy5vbmNoYW5nZSA9IGZ1bmN0aW9uIChodG1sKSB7CiAgICAgIF90aGlzMi5mb3JtLmNvbnRlbnQgPSBodG1sOwogICAgfTsKCiAgICBlZGl0b3IuY3JlYXRlKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBkb1N1Ym1pdDogZnVuY3Rpb24gZG9TdWJtaXQoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdGhpcy4kcmVmc1snZm9ybSddLnZhbGlkYXRlKGZ1bmN0aW9uICh2YWxpZCkgewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgX3RoaXMzLmxvYWRpbmcgPSB0cnVlOwogICAgICAgICAgc2VuZChfdGhpczMuZm9ybSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgIF90aGlzMy4kbm90aWZ5KHsKICAgICAgICAgICAgICB0aXRsZTogJ+WPkemAgeaIkOWKnycsCiAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICAgIGR1cmF0aW9uOiAyNTAwCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgX3RoaXMzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgX3RoaXMzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgY29uc29sZS5sb2coZXJyLnJlc3BvbnNlLmRhdGEubWVzc2FnZSk7CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;AAgBA;AACA;AACA;AACA;AACA;EACAA,aADA;EAEAC,IAFA,kBAEA;IACA;MACAC,cADA;MACAC;QAAAC;QAAAC;QAAAC;MAAA,CADA;MAEAC;QACAH,UACA;UAAAI;UAAAC;UAAAC;QAAA,CADA,CADA;QAIAL,MACA;UAAAG;UAAAC;UAAAC;QAAA,CADA;MAJA;IAFA;EAWA,CAdA;EAeAC,4BACAC,YACA,iBADA,EAEA,SAFA,EADA,CAfA;EAqBAC,OArBA,qBAqBA;IAAA;;IACA;;IACA,sCAFA,CAGA;;IACAC,0BAJA,CAKA;;IACAA;MACA;MACA;MACAC;QACAC;UACA;UACA;UACAC;QACA,CAJA;MAKA,CANA;IAOA,CAVA;;IAWAH;MACA;IACA,CAFA;;IAGAA;EACA,CA1CA;EA2CAI;IACAC,QADA,sBACA;MAAA;;MACA;QACA;UACA;UACAC;YACA;cACAC,aADA;cAEAC,eAFA;cAGAC;YAHA;;YAKA;UACA,CAPA,EAOAC,KAPA,CAOA;YACA;YACAC;UACA,CAVA;QAWA,CAbA,MAaA;UACA;QACA;MACA,CAjBA;IAkBA;EApBA;AA3CA","names":["name","data","loading","form","subject","tos","content","rules","required","message","trigger","computed","mapGetters","mounted","editor","files","upload","insert","methods","doSubmit","send","title","type","duration","catch","console"],"sourceRoot":"src/views/email","sources":["send.vue"],"sourcesContent":["<template>\r\n    <div>\r\n      <el-form ref=\"form\" :model=\"form\" :rules=\"rules\" style=\"margin-top: 6px;\" size=\"small\" label-width=\"100px\">\r\n        <el-form-item label=\"邮件标题\" prop=\"subject\">\r\n          <el-input v-model=\"form.subject\" style=\"width: 646px\" placeholder=\"请输入邮件标题，标题不能为空\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"收件地址\" prop=\"tos\">\r\n          <el-input v-model=\"form.tos\" style=\"width: 646px\" placeholder=\"请输入收件地址，多个地址英文逗号,隔开\" />\r\n        </el-form-item>\r\n        <div ref=\"editor\" class=\"editor\" />\r\n        <el-button :loading=\"loading\" style=\"margin-left:1.6%;margin-bottom: 30px\" size=\"medium\" type=\"primary\" @click=\"doSubmit\">发送邮件</el-button>\r\n      </el-form>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import { send } from '@/api/tools/email'\r\n  import { upload } from '@/utils/upload'\r\n  import { mapGetters } from 'vuex'\r\n  import E from 'wangeditor'\r\n  export default {\r\n    name: 'Index',\r\n    data() {\r\n      return {\r\n        loading: false, form: { subject: '', tos: '', content: '' },\r\n        rules: {\r\n          subject: [\r\n            { required: true, message: '标题不能为空', trigger: 'blur' }\r\n          ],\r\n          tos: [\r\n            { required: true, message: '收件人不能为空', trigger: 'blur' }\r\n          ]\r\n        }\r\n      }\r\n    },\r\n    computed: {\r\n      ...mapGetters([\r\n        'imagesUploadApi',\r\n        'baseApi'\r\n      ])\r\n    },\r\n    mounted() {\r\n      const _this = this\r\n      var editor = new E(this.$refs.editor)\r\n      // 自定义菜单配置\r\n      editor.config.zIndex = 10\r\n      // 文件上传\r\n      editor.config.customUploadImg = function(files, insert) {\r\n        // files 是 input 中选中的文件列表\r\n        // insert 是获取图片 url 后，插入到编辑器的方法\r\n        files.forEach(image => {\r\n          upload(_this.imagesUploadApi, image).then(res => {\r\n            const data = res.data\r\n            const url = _this.baseApi + '/file/' + data.type + '/' + data.realName\r\n            insert(url)\r\n          })\r\n        })\r\n      }\r\n      editor.config.onchange = (html) => {\r\n        this.form.content = html\r\n      }\r\n      editor.create()\r\n    },\r\n    methods: {\r\n      doSubmit() {\r\n        this.$refs['form'].validate((valid) => {\r\n          if (valid) {\r\n            this.loading = true\r\n            send(this.form).then(res => {\r\n              this.$notify({\r\n                title: '发送成功',\r\n                type: 'success',\r\n                duration: 2500\r\n              })\r\n              this.loading = false\r\n            }).catch(err => {\r\n              this.loading = false\r\n              console.log(err.response.data.message)\r\n            })\r\n          } else {\r\n            return false\r\n          }\r\n        })\r\n      }\r\n    }\r\n  }\r\n  </script>\r\n  \r\n  <style scoped>\r\n    .editor{\r\n      text-align:left;\r\n      margin: 20px;\r\n      width: 730px;\r\n    }\r\n   ::v-deep .w-e-text-container {\r\n      height: 360px !important;\r\n    }\r\n  </style>"]}]}