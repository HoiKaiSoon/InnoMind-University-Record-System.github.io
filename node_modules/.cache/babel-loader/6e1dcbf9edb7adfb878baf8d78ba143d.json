{"remainingRequest":"D:\\test frontend system\\vue-admin-template-master\\vue-admin-template-master\\node_modules\\babel-loader\\lib\\index.js!D:\\test frontend system\\vue-admin-template-master\\vue-admin-template-master\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\test frontend system\\vue-admin-template-master\\vue-admin-template-master\\src\\components\\Crud\\crud.js","dependencies":[{"path":"D:\\test frontend system\\vue-admin-template-master\\vue-admin-template-master\\src\\components\\Crud\\crud.js","mtime":1705162521536},{"path":"D:\\test frontend system\\vue-admin-template-master\\vue-admin-template-master\\babel.config.js","mtime":1637306514000},{"path":"D:\\test frontend system\\vue-admin-template-master\\vue-admin-template-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\test frontend system\\vue-admin-template-master\\vue-admin-template-master\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\test frontend system\\vue-admin-template-master\\vue-admin-template-master\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90eXBlb2YgZnJvbSAiRDovdGVzdCBmcm9udGVuZCBzeXN0ZW0vdnVlLWFkbWluLXRlbXBsYXRlLW1hc3Rlci92dWUtYWRtaW4tdGVtcGxhdGUtbWFzdGVyL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90eXBlb2YuanMiOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICJEOi90ZXN0IGZyb250ZW5kIHN5c3RlbS92dWUtYWRtaW4tdGVtcGxhdGUtbWFzdGVyL3Z1ZS1hZG1pbi10ZW1wbGF0ZS1tYXN0ZXIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuanNvbi5zdHJpbmdpZnkuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zb3J0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQtaW5kZXguanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZnJlZXplLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc2V0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvci5qcyI7CmltcG9ydCB7IGluaXREYXRhLCBkb3dubG9hZCB9IGZyb20gJ0AvYXBpL2RhdGEnOwppbXBvcnQgeyBwYXJzZVRpbWUsIGRvd25sb2FkRmlsZSB9IGZyb20gJ0AvdXRpbHMvaW5kZXgnOwppbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7Ci8qKg0KICogQ1JVROmFjee9rg0KICogQGF1dGhvciBtb3h1bg0KICogQHBhcmFtIHsqfSBvcHRpb25zIDxicj4NCiAqIEByZXR1cm4gY3J1ZCBpbnN0YW5jZS4NCiAqIEBleGFtcGxlDQogKiDopoHkvb/nlKjlpJpjcnVk5pe277yM6K+35Zyo5YWz6IGUY3J1ZOeahOe7hOS7tuWkhOS9v+eUqGNydWQtdGFn6L+b6KGM5qCH6K6w77yM5aaC77yaPGpvYkZvcm0gOmpvYi1zdGF0dXM9ImRpY3Quam9iX3N0YXR1cyIgY3J1ZC10YWc9ImpvYiIgLz4NCiAqLwoKZnVuY3Rpb24gQ1JVRChvcHRpb25zKSB7CiAgdmFyIGRlZmF1bHRPcHRpb25zID0gewogICAgdGFnOiAnZGVmYXVsdCcsCiAgICAvLyBpZOWtl+auteWQjQogICAgaWRGaWVsZDogJ2lkJywKICAgIC8vIOagh+mimAogICAgdGl0bGU6ICcnLAogICAgLy8g6K+35rGC5pWw5o2u55qEdXJsCiAgICB1cmw6ICcnLAogICAgLy8g6KGo5qC85pWw5o2uCiAgICBkYXRhOiBbXSwKICAgIC8vIOmAieaLqemhuQogICAgc2VsZWN0aW9uczogW10sCiAgICAvLyDlvoXmn6Xor6LnmoTlr7nosaEKICAgIHF1ZXJ5OiB7fSwKICAgIC8vIOafpeivouaVsOaNrueahOWPguaVsAogICAgcGFyYW1zOiB7fSwKICAgIC8vIEZvcm0g6KGo5Y2VCiAgICBmb3JtOiB7fSwKICAgIC8vIOmHjee9ruihqOWNlQogICAgZGVmYXVsdEZvcm06IGZ1bmN0aW9uIGRlZmF1bHRGb3JtKCkge30sCiAgICAvLyDmjpLluo/op4TliJnvvIzpu5jorqQgaWQg6ZmN5bqP77yMIOaUr+aMgeWkmuWtl+auteaOkuW6jyBbJ2lkLGRlc2MnLCAnY3JlYXRlVGltZSxhc2MnXQogICAgc29ydDogWydpZCxkZXNjJ10sCiAgICAvLyDnrYnlvoXml7bpl7QKICAgIHRpbWU6IDUwLAogICAgLy8gQ1JVRCBNZXRob2QKICAgIGNydWRNZXRob2Q6IHsKICAgICAgYWRkOiBmdW5jdGlvbiBhZGQoZm9ybSkge30sCiAgICAgIGRlbDogZnVuY3Rpb24gZGVsKGlkKSB7fSwKICAgICAgZWRpdDogZnVuY3Rpb24gZWRpdChmb3JtKSB7fSwKICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoaWQpIHt9CiAgICB9LAogICAgLy8g5Li76aG15pON5L2c5qCP5pi+56S65ZOq5Lqb5oyJ6ZKuCiAgICBvcHRTaG93OiB7CiAgICAgIGFkZDogdHJ1ZSwKICAgICAgZWRpdDogdHJ1ZSwKICAgICAgZGVsOiB0cnVlLAogICAgICBkb3dubG9hZDogdHJ1ZSwKICAgICAgcmVzZXQ6IHRydWUKICAgIH0sCiAgICAvLyDoh6rlrprkuYnkuIDkupvmianlsZXlsZ7mgKcKICAgIHByb3BzOiB7fSwKICAgIC8vIOWcqOS4u+mhteWHhuWkhwogICAgcXVlcnlPblByZXNlbnRlckNyZWF0ZWQ6IHRydWUsCiAgICAvLyDosIPor5XlvIDlhbMKICAgIGRlYnVnOiBmYWxzZQogIH07CiAgb3B0aW9ucyA9IG1lcmdlT3B0aW9ucyhkZWZhdWx0T3B0aW9ucywgb3B0aW9ucyk7CgogIHZhciBkYXRhID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBvcHRpb25zKSwge30sIHsKICAgIC8vIOiusOW9leaVsOaNrueKtuaAgQogICAgZGF0YVN0YXR1czoge30sCiAgICBzdGF0dXM6IHsKICAgICAgYWRkOiBDUlVELlNUQVRVUy5OT1JNQUwsCiAgICAgIGVkaXQ6IENSVUQuU1RBVFVTLk5PUk1BTCwKCiAgICAgIC8vIOa3u+WKoOaIlue8lui+keeKtuaAgQogICAgICBnZXQgY3UoKSB7CiAgICAgICAgaWYgKHRoaXMuYWRkID09PSBDUlVELlNUQVRVUy5OT1JNQUwgJiYgdGhpcy5lZGl0ID09PSBDUlVELlNUQVRVUy5OT1JNQUwpIHsKICAgICAgICAgIHJldHVybiBDUlVELlNUQVRVUy5OT1JNQUw7CiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmFkZCA9PT0gQ1JVRC5TVEFUVVMuUFJFUEFSRUQgfHwgdGhpcy5lZGl0ID09PSBDUlVELlNUQVRVUy5QUkVQQVJFRCkgewogICAgICAgICAgcmV0dXJuIENSVUQuU1RBVFVTLlBSRVBBUkVEOwogICAgICAgIH0gZWxzZSBpZiAodGhpcy5hZGQgPT09IENSVUQuU1RBVFVTLlBST0NFU1NJTkcgfHwgdGhpcy5lZGl0ID09PSBDUlVELlNUQVRVUy5QUk9DRVNTSU5HKSB7CiAgICAgICAgICByZXR1cm4gQ1JVRC5TVEFUVVMuUFJPQ0VTU0lORzsKICAgICAgICB9CgogICAgICAgIHRocm93IG5ldyBFcnJvcignd3JvbmcgY3J1ZFwncyBjdSBzdGF0dXMnKTsKICAgICAgfSwKCiAgICAgIC8vIOagh+mimAogICAgICBnZXQgdGl0bGUoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuYWRkID4gQ1JVRC5TVEFUVVMuTk9STUFMID8gIlx1NjVCMFx1NTg5RSIuY29uY2F0KGNydWQudGl0bGUpIDogdGhpcy5lZGl0ID4gQ1JVRC5TVEFUVVMuTk9STUFMID8gIlx1N0YxNlx1OEY5MSIuY29uY2F0KGNydWQudGl0bGUpIDogY3J1ZC50aXRsZTsKICAgICAgfQoKICAgIH0sCiAgICBtc2c6IHsKICAgICAgc3VibWl0OiAn5o+Q5Lqk5oiQ5YqfJywKICAgICAgYWRkOiAn5paw5aKe5oiQ5YqfJywKICAgICAgZWRpdDogJ+e8lui+keaIkOWKnycsCiAgICAgIGRlbDogJ+WIoOmZpOaIkOWKnycKICAgIH0sCiAgICBwYWdlOiB7CiAgICAgIC8vIOmhteeggQogICAgICBwYWdlOiAwLAogICAgICAvLyDmr4/pobXmlbDmja7mnaHmlbAKICAgICAgc2l6ZTogMTAsCiAgICAgIC8vIOaAu+aVsOaNruadoeaVsAogICAgICB0b3RhbDogMAogICAgfSwKICAgIC8vIOaVtOS9k2xvYWRpbmcKICAgIGxvYWRpbmc6IGZhbHNlLAogICAgLy8g5a+85Ye655qEIExvYWRpbmcKICAgIGRvd25sb2FkTG9hZGluZzogZmFsc2UsCiAgICAvLyDliKDpmaTnmoQgTG9hZGluZwogICAgZGVsQWxsTG9hZGluZzogZmFsc2UKICB9KTsKCiAgdmFyIG1ldGhvZHMgPSB7CiAgICAvKioNCiAgICAgKiDpgJrnlKjnmoTmj5DnpLoNCiAgICAgKi8KICAgIHN1Ym1pdFN1Y2Nlc3NOb3RpZnk6IGZ1bmN0aW9uIHN1Ym1pdFN1Y2Nlc3NOb3RpZnkoKSB7CiAgICAgIGNydWQubm90aWZ5KGNydWQubXNnLnN1Ym1pdCwgQ1JVRC5OT1RJRklDQVRJT05fVFlQRS5TVUNDRVNTKTsKICAgIH0sCiAgICBhZGRTdWNjZXNzTm90aWZ5OiBmdW5jdGlvbiBhZGRTdWNjZXNzTm90aWZ5KCkgewogICAgICBjcnVkLm5vdGlmeShjcnVkLm1zZy5hZGQsIENSVUQuTk9USUZJQ0FUSU9OX1RZUEUuU1VDQ0VTUyk7CiAgICB9LAogICAgZWRpdFN1Y2Nlc3NOb3RpZnk6IGZ1bmN0aW9uIGVkaXRTdWNjZXNzTm90aWZ5KCkgewogICAgICBjcnVkLm5vdGlmeShjcnVkLm1zZy5lZGl0LCBDUlVELk5PVElGSUNBVElPTl9UWVBFLlNVQ0NFU1MpOwogICAgfSwKICAgIGRlbFN1Y2Nlc3NOb3RpZnk6IGZ1bmN0aW9uIGRlbFN1Y2Nlc3NOb3RpZnkoKSB7CiAgICAgIGNydWQubm90aWZ5KGNydWQubXNnLmRlbCwgQ1JVRC5OT1RJRklDQVRJT05fVFlQRS5TVUNDRVNTKTsKICAgIH0sCiAgICAvLyDmkJzntKIKICAgIHRvUXVlcnk6IGZ1bmN0aW9uIHRvUXVlcnkoKSB7CiAgICAgIGNydWQucGFnZS5wYWdlID0gMTsKICAgICAgY3J1ZC5yZWZyZXNoKCk7CiAgICB9LAogICAgLy8g5Yi35pawCiAgICByZWZyZXNoOiBmdW5jdGlvbiByZWZyZXNoKCkgewogICAgICBpZiAoIWNhbGxWbUhvb2soY3J1ZCwgQ1JVRC5IT09LLmJlZm9yZVJlZnJlc2gpKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIGNydWQubG9hZGluZyA9IHRydWU7IC8vIOivt+axguaVsOaNrgoKICAgICAgICBpbml0RGF0YShjcnVkLnVybCwgY3J1ZC5nZXRRdWVyeVBhcmFtcygpKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgICB2YXIgdGFibGUgPSBjcnVkLmdldFRhYmxlKCk7CgogICAgICAgICAgaWYgKHRhYmxlICYmIHRhYmxlLmxhenkpIHsKICAgICAgICAgICAgLy8g5oeS5Yqg6L295a2Q6IqC54K55pWw5o2u77yM5riF5o6J5bey5Yqg6L2955qE5pWw5o2uCiAgICAgICAgICAgIHRhYmxlLnN0b3JlLnN0YXRlcy50cmVlRGF0YSA9IHt9OwogICAgICAgICAgICB0YWJsZS5zdG9yZS5zdGF0ZXMubGF6eVRyZWVOb2RlTWFwID0ge307CiAgICAgICAgICB9CgogICAgICAgICAgY3J1ZC5wYWdlLnRvdGFsID0gZGF0YS50b3RhbEVsZW1lbnRzOwogICAgICAgICAgY3J1ZC5kYXRhID0gZGF0YS5jb250ZW50OwogICAgICAgICAgY3J1ZC5yZXNldERhdGFTdGF0dXMoKTsgLy8gdGltZSDmr6vnp5LlkI7mmL7npLrooajmoLwKCiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgY3J1ZC5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgIGNhbGxWbUhvb2soY3J1ZCwgQ1JVRC5IT09LLmFmdGVyUmVmcmVzaCk7CiAgICAgICAgICB9LCBjcnVkLnRpbWUpOwogICAgICAgICAgcmVzb2x2ZShkYXRhKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICBjcnVkLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgIHJlamVjdChlcnIpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCgogICAgLyoqDQogICAgICog5ZCv5Yqo5re75YqgDQogICAgICovCiAgICB0b0FkZDogZnVuY3Rpb24gdG9BZGQoKSB7CiAgICAgIGNydWQucmVzZXRGb3JtKCk7CgogICAgICBpZiAoIShjYWxsVm1Ib29rKGNydWQsIENSVUQuSE9PSy5iZWZvcmVUb0FkZCwgY3J1ZC5mb3JtKSAmJiBjYWxsVm1Ib29rKGNydWQsIENSVUQuSE9PSy5iZWZvcmVUb0NVLCBjcnVkLmZvcm0pKSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgY3J1ZC5zdGF0dXMuYWRkID0gQ1JVRC5TVEFUVVMuUFJFUEFSRUQ7CiAgICAgIGNhbGxWbUhvb2soY3J1ZCwgQ1JVRC5IT09LLmFmdGVyVG9BZGQsIGNydWQuZm9ybSk7CiAgICAgIGNhbGxWbUhvb2soY3J1ZCwgQ1JVRC5IT09LLmFmdGVyVG9DVSwgY3J1ZC5mb3JtKTsKICAgIH0sCgogICAgLyoqDQogICAgICog5ZCv5Yqo57yW6L6RDQogICAgICogQHBhcmFtIHsqfSBkYXRhIOaVsOaNrumhuQ0KICAgICAqLwogICAgdG9FZGl0OiBmdW5jdGlvbiB0b0VkaXQoZGF0YSkgewogICAgICBjcnVkLnJlc2V0Rm9ybShKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGRhdGEpKSk7CgogICAgICBpZiAoIShjYWxsVm1Ib29rKGNydWQsIENSVUQuSE9PSy5iZWZvcmVUb0VkaXQsIGNydWQuZm9ybSkgJiYgY2FsbFZtSG9vayhjcnVkLCBDUlVELkhPT0suYmVmb3JlVG9DVSwgY3J1ZC5mb3JtKSkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNydWQuc3RhdHVzLmVkaXQgPSBDUlVELlNUQVRVUy5QUkVQQVJFRDsKICAgICAgY3J1ZC5nZXREYXRhU3RhdHVzKGNydWQuZ2V0RGF0YUlkKGRhdGEpKS5lZGl0ID0gQ1JVRC5TVEFUVVMuUFJFUEFSRUQ7CiAgICAgIGNhbGxWbUhvb2soY3J1ZCwgQ1JVRC5IT09LLmFmdGVyVG9FZGl0LCBjcnVkLmZvcm0pOwogICAgICBjYWxsVm1Ib29rKGNydWQsIENSVUQuSE9PSy5hZnRlclRvQ1UsIGNydWQuZm9ybSk7CiAgICB9LAoKICAgIC8qKg0KICAgICAqIOWQr+WKqOWIoOmZpA0KICAgICAqIEBwYXJhbSB7Kn0gZGF0YSDmlbDmja7pobkNCiAgICAgKi8KICAgIHRvRGVsZXRlOiBmdW5jdGlvbiB0b0RlbGV0ZShkYXRhKSB7CiAgICAgIGNydWQuZ2V0RGF0YVN0YXR1cyhjcnVkLmdldERhdGFJZChkYXRhKSkuZGVsZXRlID0gQ1JVRC5TVEFUVVMuUFJFUEFSRUQ7CiAgICB9LAoKICAgIC8qKg0KICAgICAqIOWPlua2iOWIoOmZpA0KICAgICAqIEBwYXJhbSB7Kn0gZGF0YSDmlbDmja7pobkNCiAgICAgKi8KICAgIGNhbmNlbERlbGV0ZTogZnVuY3Rpb24gY2FuY2VsRGVsZXRlKGRhdGEpIHsKICAgICAgaWYgKCFjYWxsVm1Ib29rKGNydWQsIENSVUQuSE9PSy5iZWZvcmVEZWxldGVDYW5jZWwsIGRhdGEpKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBjcnVkLmdldERhdGFTdGF0dXMoY3J1ZC5nZXREYXRhSWQoZGF0YSkpLmRlbGV0ZSA9IENSVUQuU1RBVFVTLk5PUk1BTDsKICAgICAgY2FsbFZtSG9vayhjcnVkLCBDUlVELkhPT0suYWZ0ZXJEZWxldGVDYW5jZWwsIGRhdGEpOwogICAgfSwKCiAgICAvKioNCiAgICAgKiDlj5bmtojmlrDlop4v57yW6L6RDQogICAgICovCiAgICBjYW5jZWxDVTogZnVuY3Rpb24gY2FuY2VsQ1UoKSB7CiAgICAgIHZhciBhZGRTdGF0dXMgPSBjcnVkLnN0YXR1cy5hZGQ7CiAgICAgIHZhciBlZGl0U3RhdHVzID0gY3J1ZC5zdGF0dXMuZWRpdDsKCiAgICAgIGlmIChhZGRTdGF0dXMgPT09IENSVUQuU1RBVFVTLlBSRVBBUkVEKSB7CiAgICAgICAgaWYgKCFjYWxsVm1Ib29rKGNydWQsIENSVUQuSE9PSy5iZWZvcmVBZGRDYW5jZWwsIGNydWQuZm9ybSkpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGNydWQuc3RhdHVzLmFkZCA9IENSVUQuU1RBVFVTLk5PUk1BTDsKICAgICAgfQoKICAgICAgaWYgKGVkaXRTdGF0dXMgPT09IENSVUQuU1RBVFVTLlBSRVBBUkVEKSB7CiAgICAgICAgaWYgKCFjYWxsVm1Ib29rKGNydWQsIENSVUQuSE9PSy5iZWZvcmVFZGl0Q2FuY2VsLCBjcnVkLmZvcm0pKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBjcnVkLnN0YXR1cy5lZGl0ID0gQ1JVRC5TVEFUVVMuTk9STUFMOwogICAgICAgIGNydWQuZ2V0RGF0YVN0YXR1cyhjcnVkLmdldERhdGFJZChjcnVkLmZvcm0pKS5lZGl0ID0gQ1JVRC5TVEFUVVMuTk9STUFMOwogICAgICB9CgogICAgICBjcnVkLnJlc2V0Rm9ybSgpOwoKICAgICAgaWYgKGFkZFN0YXR1cyA9PT0gQ1JVRC5TVEFUVVMuUFJFUEFSRUQpIHsKICAgICAgICBjYWxsVm1Ib29rKGNydWQsIENSVUQuSE9PSy5hZnRlckFkZENhbmNlbCwgY3J1ZC5mb3JtKTsKICAgICAgfQoKICAgICAgaWYgKGVkaXRTdGF0dXMgPT09IENSVUQuU1RBVFVTLlBSRVBBUkVEKSB7CiAgICAgICAgY2FsbFZtSG9vayhjcnVkLCBDUlVELkhPT0suYWZ0ZXJFZGl0Q2FuY2VsLCBjcnVkLmZvcm0pOwogICAgICB9IC8vIOa4hemZpOihqOWNlemqjOivgQoKCiAgICAgIGlmIChjcnVkLmZpbmRWTSgnZm9ybScpLiRyZWZzWydmb3JtJ10pIHsKICAgICAgICBjcnVkLmZpbmRWTSgnZm9ybScpLiRyZWZzWydmb3JtJ10uY2xlYXJWYWxpZGF0ZSgpOwogICAgICB9CiAgICB9LAoKICAgIC8qKg0KICAgICAqIOaPkOS6pOaWsOWini/nvJbovpENCiAgICAgKi8KICAgIHN1Ym1pdENVOiBmdW5jdGlvbiBzdWJtaXRDVSgpIHsKICAgICAgaWYgKCFjYWxsVm1Ib29rKGNydWQsIENSVUQuSE9PSy5iZWZvcmVWYWxpZGF0ZUNVKSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgY3J1ZC5maW5kVk0oJ2Zvcm0nKS4kcmVmc1snZm9ybSddLnZhbGlkYXRlKGZ1bmN0aW9uICh2YWxpZCkgewogICAgICAgIGlmICghdmFsaWQpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGlmICghY2FsbFZtSG9vayhjcnVkLCBDUlVELkhPT0suYWZ0ZXJWYWxpZGF0ZUNVKSkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgaWYgKGNydWQuc3RhdHVzLmFkZCA9PT0gQ1JVRC5TVEFUVVMuUFJFUEFSRUQpIHsKICAgICAgICAgIGNydWQuZG9BZGQoKTsKICAgICAgICB9IGVsc2UgaWYgKGNydWQuc3RhdHVzLmVkaXQgPT09IENSVUQuU1RBVFVTLlBSRVBBUkVEKSB7CiAgICAgICAgICBjcnVkLmRvRWRpdCgpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAoKICAgIC8qKg0KICAgICAqIOaJp+ihjOa3u+WKoA0KICAgICAqLwogICAgZG9BZGQ6IGZ1bmN0aW9uIGRvQWRkKCkgewogICAgICBpZiAoIWNhbGxWbUhvb2soY3J1ZCwgQ1JVRC5IT09LLmJlZm9yZVN1Ym1pdCkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNydWQuc3RhdHVzLmFkZCA9IENSVUQuU1RBVFVTLlBST0NFU1NJTkc7CiAgICAgIGNydWQuY3J1ZE1ldGhvZC5hZGQoY3J1ZC5mb3JtKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBjcnVkLnN0YXR1cy5hZGQgPSBDUlVELlNUQVRVUy5OT1JNQUw7CiAgICAgICAgY3J1ZC5yZXNldEZvcm0oKTsKICAgICAgICBjcnVkLmFkZFN1Y2Nlc3NOb3RpZnkoKTsKICAgICAgICBjYWxsVm1Ib29rKGNydWQsIENSVUQuSE9PSy5hZnRlclN1Ym1pdCk7CiAgICAgICAgY3J1ZC50b1F1ZXJ5KCk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgICBjcnVkLnN0YXR1cy5hZGQgPSBDUlVELlNUQVRVUy5QUkVQQVJFRDsKICAgICAgICBjYWxsVm1Ib29rKGNydWQsIENSVUQuSE9PSy5hZnRlckFkZEVycm9yKTsKICAgICAgfSk7CiAgICB9LAoKICAgIC8qKg0KICAgICAqIOaJp+ihjOe8lui+kQ0KICAgICAqLwogICAgZG9FZGl0OiBmdW5jdGlvbiBkb0VkaXQoKSB7CiAgICAgIGlmICghY2FsbFZtSG9vayhjcnVkLCBDUlVELkhPT0suYmVmb3JlU3VibWl0KSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgY3J1ZC5zdGF0dXMuZWRpdCA9IENSVUQuU1RBVFVTLlBST0NFU1NJTkc7CiAgICAgIGNydWQuY3J1ZE1ldGhvZC5lZGl0KGNydWQuZm9ybSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgY3J1ZC5zdGF0dXMuZWRpdCA9IENSVUQuU1RBVFVTLk5PUk1BTDsKICAgICAgICBjcnVkLmdldERhdGFTdGF0dXMoY3J1ZC5nZXREYXRhSWQoY3J1ZC5mb3JtKSkuZWRpdCA9IENSVUQuU1RBVFVTLk5PUk1BTDsKICAgICAgICBjcnVkLmVkaXRTdWNjZXNzTm90aWZ5KCk7CiAgICAgICAgY3J1ZC5yZXNldEZvcm0oKTsKICAgICAgICBjYWxsVm1Ib29rKGNydWQsIENSVUQuSE9PSy5hZnRlclN1Ym1pdCk7CiAgICAgICAgY3J1ZC5yZWZyZXNoKCk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgICBjcnVkLnN0YXR1cy5lZGl0ID0gQ1JVRC5TVEFUVVMuUFJFUEFSRUQ7CiAgICAgICAgY2FsbFZtSG9vayhjcnVkLCBDUlVELkhPT0suYWZ0ZXJFZGl0RXJyb3IpOwogICAgICB9KTsKICAgIH0sCgogICAgLyoqDQogICAgICog5omn6KGM5Yig6ZmkDQogICAgICogQHBhcmFtIHsqfSBkYXRhIOaVsOaNrumhuQ0KICAgICAqLwogICAgZG9EZWxldGU6IGZ1bmN0aW9uIGRvRGVsZXRlKGRhdGEpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBkZWxBbGwgPSBmYWxzZTsKICAgICAgdmFyIGRhdGFTdGF0dXM7CiAgICAgIHZhciBpZHMgPSBbXTsKCiAgICAgIGlmIChkYXRhIGluc3RhbmNlb2YgQXJyYXkpIHsKICAgICAgICBkZWxBbGwgPSB0cnVlOwogICAgICAgIGRhdGEuZm9yRWFjaChmdW5jdGlvbiAodmFsKSB7CiAgICAgICAgICBpZHMucHVzaChfdGhpcy5nZXREYXRhSWQodmFsKSk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWRzLnB1c2godGhpcy5nZXREYXRhSWQoZGF0YSkpOwogICAgICAgIGRhdGFTdGF0dXMgPSBjcnVkLmdldERhdGFTdGF0dXModGhpcy5nZXREYXRhSWQoZGF0YSkpOwogICAgICB9CgogICAgICBpZiAoIWNhbGxWbUhvb2soY3J1ZCwgQ1JVRC5IT09LLmJlZm9yZURlbGV0ZSwgZGF0YSkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICghZGVsQWxsKSB7CiAgICAgICAgZGF0YVN0YXR1cy5kZWxldGUgPSBDUlVELlNUQVRVUy5QUk9DRVNTSU5HOwogICAgICB9CgogICAgICByZXR1cm4gY3J1ZC5jcnVkTWV0aG9kLmRlbChpZHMpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIGlmIChkZWxBbGwpIHsKICAgICAgICAgIGNydWQuZGVsQWxsTG9hZGluZyA9IGZhbHNlOwogICAgICAgIH0gZWxzZSBkYXRhU3RhdHVzLmRlbGV0ZSA9IENSVUQuU1RBVFVTLlBSRVBBUkVEOwoKICAgICAgICBjcnVkLmRsZUNoYW5nZVBhZ2UoMSk7CiAgICAgICAgY3J1ZC5kZWxTdWNjZXNzTm90aWZ5KCk7CiAgICAgICAgY2FsbFZtSG9vayhjcnVkLCBDUlVELkhPT0suYWZ0ZXJEZWxldGUsIGRhdGEpOwogICAgICAgIGNydWQucmVmcmVzaCgpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKGRlbEFsbCkgewogICAgICAgICAgY3J1ZC5kZWxBbGxMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgfSBlbHNlIGRhdGFTdGF0dXMuZGVsZXRlID0gQ1JVRC5TVEFUVVMuUFJFUEFSRUQ7CiAgICAgIH0pOwogICAgfSwKCiAgICAvKioNCiAgICAgKiDpgJrnlKjlr7zlh7oNCiAgICAgKi8KICAgIGRvRXhwb3J0OiBmdW5jdGlvbiBkb0V4cG9ydCgpIHsKICAgICAgY3J1ZC5kb3dubG9hZExvYWRpbmcgPSB0cnVlOwogICAgICBkb3dubG9hZChjcnVkLnVybCArICcvZG93bmxvYWQnLCBjcnVkLmdldFF1ZXJ5UGFyYW1zKCkpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkgewogICAgICAgIGRvd25sb2FkRmlsZShyZXN1bHQsIGNydWQudGl0bGUgKyAn5pWw5o2uJywgJ3hsc3gnKTsKICAgICAgICBjcnVkLmRvd25sb2FkTG9hZGluZyA9IGZhbHNlOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgY3J1ZC5kb3dubG9hZExvYWRpbmcgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9LAoKICAgIC8qKg0KICAgICAqIOiOt+WPluafpeivouWPguaVsA0KICAgICAqLwogICAgZ2V0UXVlcnlQYXJhbXM6IGZ1bmN0aW9uIGdldFF1ZXJ5UGFyYW1zKCkgewogICAgICAvLyDmuIXpmaTlj4LmlbDml6DlgLznmoTmg4XlhrUKICAgICAgT2JqZWN0LmtleXMoY3J1ZC5xdWVyeSkubGVuZ3RoICE9PSAwICYmIE9iamVjdC5rZXlzKGNydWQucXVlcnkpLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICBpZiAoY3J1ZC5xdWVyeVtpdGVtXSA9PT0gbnVsbCB8fCBjcnVkLnF1ZXJ5W2l0ZW1dID09PSAnJykgY3J1ZC5xdWVyeVtpdGVtXSA9IHVuZGVmaW5lZDsKICAgICAgfSk7CiAgICAgIE9iamVjdC5rZXlzKGNydWQucGFyYW1zKS5sZW5ndGggIT09IDAgJiYgT2JqZWN0LmtleXMoY3J1ZC5wYXJhbXMpLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICBpZiAoY3J1ZC5wYXJhbXNbaXRlbV0gPT09IG51bGwgfHwgY3J1ZC5wYXJhbXNbaXRlbV0gPT09ICcnKSBjcnVkLnBhcmFtc1tpdGVtXSA9IHVuZGVmaW5lZDsKICAgICAgfSk7CiAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoewogICAgICAgIHBhZ2U6IGNydWQucGFnZS5wYWdlIC0gMSwKICAgICAgICBzaXplOiBjcnVkLnBhZ2Uuc2l6ZSwKICAgICAgICBzb3J0OiBjcnVkLnNvcnQKICAgICAgfSwgY3J1ZC5xdWVyeSksIGNydWQucGFyYW1zKTsKICAgIH0sCiAgICAvLyDlvZPliY3pobXmlLnlj5gKICAgIHBhZ2VDaGFuZ2VIYW5kbGVyOiBmdW5jdGlvbiBwYWdlQ2hhbmdlSGFuZGxlcihlKSB7CiAgICAgIGNydWQucGFnZS5wYWdlID0gZTsKICAgICAgY3J1ZC5yZWZyZXNoKCk7CiAgICB9LAogICAgLy8g5q+P6aG15p2h5pWw5pS55Y+YCiAgICBzaXplQ2hhbmdlSGFuZGxlcjogZnVuY3Rpb24gc2l6ZUNoYW5nZUhhbmRsZXIoZSkgewogICAgICBjcnVkLnBhZ2Uuc2l6ZSA9IGU7CiAgICAgIGNydWQucGFnZS5wYWdlID0gMTsKICAgICAgY3J1ZC5yZWZyZXNoKCk7CiAgICB9LAogICAgLy8g6aKE6Ziy5Yig6Zmk56ys5LqM6aG15pyA5ZCO5LiA5p2h5pWw5o2u5pe277yM5oiW6ICF5aSa6YCJ5Yig6Zmk56ys5LqM6aG155qE5pWw5o2u5pe277yM6aG156CB6ZSZ6K+v5a+86Ie06K+35rGC5peg5pWw5o2uCiAgICBkbGVDaGFuZ2VQYWdlOiBmdW5jdGlvbiBkbGVDaGFuZ2VQYWdlKHNpemUpIHsKICAgICAgaWYgKGNydWQuZGF0YS5sZW5ndGggPT09IHNpemUgJiYgY3J1ZC5wYWdlLnBhZ2UgIT09IDEpIHsKICAgICAgICBjcnVkLnBhZ2UucGFnZSAtPSAxOwogICAgICB9CiAgICB9LAogICAgLy8g6YCJ5oup5pS55Y+YCiAgICBzZWxlY3Rpb25DaGFuZ2VIYW5kbGVyOiBmdW5jdGlvbiBzZWxlY3Rpb25DaGFuZ2VIYW5kbGVyKHZhbCkgewogICAgICBjcnVkLnNlbGVjdGlvbnMgPSB2YWw7CiAgICB9LAoKICAgIC8qKg0KICAgICAqIOmHjee9ruafpeivouWPguaVsA0KICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gdG9RdWVyeSDph43nva7lkI7ov5vooYzmn6Xor6Lmk43kvZwNCiAgICAgKi8KICAgIHJlc2V0UXVlcnk6IGZ1bmN0aW9uIHJlc2V0UXVlcnkoKSB7CiAgICAgIHZhciB0b1F1ZXJ5ID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB0cnVlOwogICAgICB2YXIgZGVmYXVsdFF1ZXJ5ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShjcnVkLmRlZmF1bHRRdWVyeSkpOwogICAgICB2YXIgcXVlcnkgPSBjcnVkLnF1ZXJ5OwogICAgICBPYmplY3Qua2V5cyhxdWVyeSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgcXVlcnlba2V5XSA9IGRlZmF1bHRRdWVyeVtrZXldOwogICAgICB9KTsgLy8g6YeN572u5Y+C5pWwCgogICAgICB0aGlzLnBhcmFtcyA9IHt9OwoKICAgICAgaWYgKHRvUXVlcnkpIHsKICAgICAgICBjcnVkLnRvUXVlcnkoKTsKICAgICAgfQogICAgfSwKCiAgICAvKioNCiAgICAgKiDph43nva7ooajljZUNCiAgICAgKiBAcGFyYW0ge0FycmF5fSBkYXRhIOaVsOaNrg0KICAgICAqLwogICAgcmVzZXRGb3JtOiBmdW5jdGlvbiByZXNldEZvcm0oZGF0YSkgewogICAgICB2YXIgZm9ybSA9IGRhdGEgfHwgKF90eXBlb2YoY3J1ZC5kZWZhdWx0Rm9ybSkgPT09ICdvYmplY3QnID8gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShjcnVkLmRlZmF1bHRGb3JtKSkgOiBjcnVkLmRlZmF1bHRGb3JtLmFwcGx5KGNydWQuZmluZFZNKCdmb3JtJykpKTsKICAgICAgdmFyIGNydWRGcm9tID0gY3J1ZC5mb3JtOwoKICAgICAgZm9yICh2YXIga2V5IGluIGZvcm0pIHsKICAgICAgICBpZiAoY3J1ZEZyb20uaGFzT3duUHJvcGVydHkoa2V5KSkgewogICAgICAgICAgY3J1ZEZyb21ba2V5XSA9IGZvcm1ba2V5XTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgVnVlLnNldChjcnVkRnJvbSwga2V5LCBmb3JtW2tleV0pOwogICAgICAgIH0KICAgICAgfSAvLyBhZGQgYnkgZ2hsIDIwMjAtMTAtMDQgIOmhtemdoumHjeWkjea3u+WKoOS/oeaBr+aXtu+8jOS4i+aLieahhueahOagoemqjOS8muWtmOWcqO+8jOmcgOimgeaJvuW3peWPlua2iAoKCiAgICAgIGlmIChjcnVkLmZpbmRWTSgnZm9ybScpLiRyZWZzWydmb3JtJ10pIHsKICAgICAgICBjcnVkLmZpbmRWTSgnZm9ybScpLiRyZWZzWydmb3JtJ10uY2xlYXJWYWxpZGF0ZSgpOwogICAgICB9CiAgICB9LAoKICAgIC8qKg0KICAgICAqIOmHjee9ruaVsOaNrueKtuaAgQ0KICAgICAqLwogICAgcmVzZXREYXRhU3RhdHVzOiBmdW5jdGlvbiByZXNldERhdGFTdGF0dXMoKSB7CiAgICAgIHZhciBkYXRhU3RhdHVzID0ge307CgogICAgICBmdW5jdGlvbiByZXNldFN0YXR1cyhkYXRhcykgewogICAgICAgIGRhdGFzLmZvckVhY2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIGRhdGFTdGF0dXNbY3J1ZC5nZXREYXRhSWQoZSldID0gewogICAgICAgICAgICBkZWxldGU6IDAsCiAgICAgICAgICAgIGVkaXQ6IDAKICAgICAgICAgIH07CgogICAgICAgICAgaWYgKGUuY2hpbGRyZW4pIHsKICAgICAgICAgICAgcmVzZXRTdGF0dXMoZS5jaGlsZHJlbik7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHJlc2V0U3RhdHVzKGNydWQuZGF0YSk7CiAgICAgIGNydWQuZGF0YVN0YXR1cyA9IGRhdGFTdGF0dXM7CiAgICB9LAoKICAgIC8qKg0KICAgICAqIOiOt+WPluaVsOaNrueKtuaAgQ0KICAgICAqIEBwYXJhbSB7TnVtYmVyIHwgU3RyaW5nfSBpZCDmlbDmja7poblpZA0KICAgICAqLwogICAgZ2V0RGF0YVN0YXR1czogZnVuY3Rpb24gZ2V0RGF0YVN0YXR1cyhpZCkgewogICAgICByZXR1cm4gY3J1ZC5kYXRhU3RhdHVzW2lkXTsKICAgIH0sCgogICAgLyoqDQogICAgICog55So5LqO5qCR5b2i6KGo5qC85aSa6YCJLCDpgInkuK3miYDmnIkNCiAgICAgKiBAcGFyYW0gc2VsZWN0aW9uDQogICAgICovCiAgICBzZWxlY3RBbGxDaGFuZ2U6IGZ1bmN0aW9uIHNlbGVjdEFsbENoYW5nZShzZWxlY3Rpb24pIHsKICAgICAgLy8g5aaC5p6c6YCJ5Lit55qE5pWw55uu5LiO6K+35rGC5Yiw55qE5pWw55uu55u45ZCM5bCx6YCJ5Lit5a2Q6IqC54K577yM5ZCm5YiZ5bCx5riF56m66YCJ5LitCiAgICAgIGlmIChzZWxlY3Rpb24gJiYgc2VsZWN0aW9uLmxlbmd0aCA9PT0gY3J1ZC5kYXRhLmxlbmd0aCkgewogICAgICAgIHNlbGVjdGlvbi5mb3JFYWNoKGZ1bmN0aW9uICh2YWwpIHsKICAgICAgICAgIGNydWQuc2VsZWN0Q2hhbmdlKHNlbGVjdGlvbiwgdmFsKTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjcnVkLmdldFRhYmxlKCkuY2xlYXJTZWxlY3Rpb24oKTsKICAgICAgfQogICAgfSwKCiAgICAvKioNCiAgICAgKiDnlKjkuo7moJHlvaLooajmoLzlpJrpgInvvIzljZXpgInnmoTlsIHoo4UNCiAgICAgKiBAcGFyYW0gc2VsZWN0aW9uDQogICAgICogQHBhcmFtIHJvdw0KICAgICAqLwogICAgc2VsZWN0Q2hhbmdlOiBmdW5jdGlvbiBzZWxlY3RDaGFuZ2Uoc2VsZWN0aW9uLCByb3cpIHsKICAgICAgLy8g5aaC5p6cc2VsZWN0aW9u5Lit5a2Y5Zyocm935Luj6KGo5piv6YCJ5Lit77yM5ZCm5YiZ5piv5Y+W5raI6YCJ5LitCiAgICAgIGlmIChzZWxlY3Rpb24uZmluZChmdW5jdGlvbiAodmFsKSB7CiAgICAgICAgcmV0dXJuIGNydWQuZ2V0RGF0YUlkKHZhbCkgPT09IGNydWQuZ2V0RGF0YUlkKHJvdyk7CiAgICAgIH0pKSB7CiAgICAgICAgaWYgKHJvdy5jaGlsZHJlbikgewogICAgICAgICAgcm93LmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24gKHZhbCkgewogICAgICAgICAgICBjcnVkLmdldFRhYmxlKCkudG9nZ2xlUm93U2VsZWN0aW9uKHZhbCwgdHJ1ZSk7CiAgICAgICAgICAgIHNlbGVjdGlvbi5wdXNoKHZhbCk7CgogICAgICAgICAgICBpZiAodmFsLmNoaWxkcmVuKSB7CiAgICAgICAgICAgICAgY3J1ZC5zZWxlY3RDaGFuZ2Uoc2VsZWN0aW9uLCB2YWwpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY3J1ZC50b2dnbGVSb3dTZWxlY3Rpb24oc2VsZWN0aW9uLCByb3cpOwogICAgICB9CiAgICB9LAoKICAgIC8qKg0KICAgICAqIOWIh+aNoumAieS4reeKtuaAgQ0KICAgICAqIEBwYXJhbSBzZWxlY3Rpb24NCiAgICAgKiBAcGFyYW0gZGF0YQ0KICAgICAqLwogICAgdG9nZ2xlUm93U2VsZWN0aW9uOiBmdW5jdGlvbiB0b2dnbGVSb3dTZWxlY3Rpb24oc2VsZWN0aW9uLCBkYXRhKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgaWYgKGRhdGEuY2hpbGRyZW4pIHsKICAgICAgICBkYXRhLmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24gKHZhbCkgewogICAgICAgICAgc2VsZWN0aW9uLnNwbGljZShzZWxlY3Rpb24uZmluZEluZGV4KGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgIHJldHVybiBfdGhpczIuZ2V0RGF0YUlkKGl0ZW0pID09PSBfdGhpczIuZ2V0RGF0YUlkKHZhbCk7CiAgICAgICAgICB9KSwgMSk7CiAgICAgICAgICBjcnVkLmdldFRhYmxlKCkudG9nZ2xlUm93U2VsZWN0aW9uKHZhbCwgZmFsc2UpOwoKICAgICAgICAgIGlmICh2YWwuY2hpbGRyZW4pIHsKICAgICAgICAgICAgY3J1ZC50b2dnbGVSb3dTZWxlY3Rpb24oc2VsZWN0aW9uLCB2YWwpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgZmluZFZNOiBmdW5jdGlvbiBmaW5kVk0odHlwZSkgewogICAgICByZXR1cm4gY3J1ZC52bXMuZmluZChmdW5jdGlvbiAodm0pIHsKICAgICAgICByZXR1cm4gdm0gJiYgdm0udHlwZSA9PT0gdHlwZTsKICAgICAgfSkudm07CiAgICB9LAogICAgbm90aWZ5OiBmdW5jdGlvbiBub3RpZnkodGl0bGUpIHsKICAgICAgdmFyIHR5cGUgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IENSVUQuTk9USUZJQ0FUSU9OX1RZUEUuSU5GTzsKICAgICAgY3J1ZC52bXNbMF0udm0uJG5vdGlmeSh7CiAgICAgICAgdGl0bGU6IHRpdGxlLAogICAgICAgIHR5cGU6IHR5cGUsCiAgICAgICAgZHVyYXRpb246IDI1MDAKICAgICAgfSk7CiAgICB9LAogICAgdXBkYXRlUHJvcDogZnVuY3Rpb24gdXBkYXRlUHJvcChuYW1lLCB2YWx1ZSkgewogICAgICBWdWUuc2V0KGNydWQucHJvcHMsIG5hbWUsIHZhbHVlKTsKICAgIH0sCiAgICBnZXREYXRhSWQ6IGZ1bmN0aW9uIGdldERhdGFJZChkYXRhKSB7CiAgICAgIHJldHVybiBkYXRhW3RoaXMuaWRGaWVsZF07CiAgICB9LAogICAgZ2V0VGFibGU6IGZ1bmN0aW9uIGdldFRhYmxlKCkgewogICAgICByZXR1cm4gdGhpcy5maW5kVk0oJ3ByZXNlbnRlcicpLiRyZWZzLnRhYmxlOwogICAgfSwKICAgIGF0dGNoVGFibGU6IGZ1bmN0aW9uIGF0dGNoVGFibGUoKSB7CiAgICAgIHZhciB0YWJsZSA9IHRoaXMuZ2V0VGFibGUoKTsKICAgICAgdGhpcy51cGRhdGVQcm9wKCd0YWJsZScsIHRhYmxlKTsKICAgICAgdmFyIHRoYXQgPSB0aGlzOwogICAgICB0YWJsZS4kb24oJ2V4cGFuZC1jaGFuZ2UnLCBmdW5jdGlvbiAocm93LCBleHBhbmRlZCkgewogICAgICAgIGlmICghZXhwYW5kZWQpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHZhciBsYXp5VHJlZU5vZGVNYXAgPSB0YWJsZS5zdG9yZS5zdGF0ZXMubGF6eVRyZWVOb2RlTWFwOwogICAgICAgIHJvdy5jaGlsZHJlbiA9IGxhenlUcmVlTm9kZU1hcFtjcnVkLmdldERhdGFJZChyb3cpXTsKCiAgICAgICAgaWYgKHJvdy5jaGlsZHJlbikgewogICAgICAgICAgcm93LmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24gKGVsZSkgewogICAgICAgICAgICB2YXIgaWQgPSBjcnVkLmdldERhdGFJZChlbGUpOwoKICAgICAgICAgICAgaWYgKHRoYXQuZGF0YVN0YXR1c1tpZF0gPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgIHRoYXQuZGF0YVN0YXR1c1tpZF0gPSB7CiAgICAgICAgICAgICAgICBkZWxldGU6IDAsCiAgICAgICAgICAgICAgICBlZGl0OiAwCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9OwogIHZhciBjcnVkID0gT2JqZWN0LmFzc2lnbih7fSwgZGF0YSk7IC8vIOWPr+ingua1i+WMlgoKICBWdWUub2JzZXJ2YWJsZShjcnVkKTsgLy8g6ZmE5Yqg5pa55rOVCgogIE9iamVjdC5hc3NpZ24oY3J1ZCwgbWV0aG9kcyk7IC8vIOiusOW9leWIneWni+m7mOiupOeahOafpeivouWPguaVsO+8jOWQjue7remHjee9ruafpeivouaXtuS9v+eUqAoKICBPYmplY3QuYXNzaWduKGNydWQsIHsKICAgIGRlZmF1bHRRdWVyeTogSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShkYXRhLnF1ZXJ5KSksCiAgICAvLyDpooTnlZk05L2N5a2Y5YKo77ya57uE5Lu2IOS4u+mhteOAgeWktOmDqOOAgeWIhumhteOAgeihqOWNle+8jOiwg+ivleafpeeci+S5n+aWueS+v+aJvgogICAgdm1zOiBBcnJheSg0KSwKCiAgICAvKioNCiAgICAgKiDms6jlhoznu4Tku7blrp7kvosNCiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZSDnsbvlnosNCiAgICAgKiBAcGFyYW0geyp9IHZtIOe7hOS7tuWunuS+iw0KICAgICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleCDor6Xlj4LmlbDlhoXpg6jkvb/nlKgNCiAgICAgKi8KICAgIHJlZ2lzdGVyVk06IGZ1bmN0aW9uIHJlZ2lzdGVyVk0odHlwZSwgdm0pIHsKICAgICAgdmFyIGluZGV4ID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiAtMTsKICAgICAgdmFyIHZtT2JqID0gewogICAgICAgIHR5cGU6IHR5cGUsCiAgICAgICAgdm06IHZtCiAgICAgIH07CgogICAgICBpZiAoaW5kZXggPCAwKSB7CiAgICAgICAgdGhpcy52bXMucHVzaCh2bU9iaik7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoaW5kZXggPCA0KSB7CiAgICAgICAgLy8g5YaF572u6aKE55WZdm3mlbAKICAgICAgICB0aGlzLnZtc1tpbmRleF0gPSB2bU9iajsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMudm1zLmxlbmd0aCA9IE1hdGgubWF4KHRoaXMudm1zLmxlbmd0aCwgaW5kZXgpOwogICAgICB0aGlzLnZtcy5zcGxpY2UoaW5kZXgsIDEsIHZtT2JqKTsKICAgIH0sCgogICAgLyoqDQogICAgICog5Y+W5raI5rOo5YaM57uE5Lu25a6e5L6LDQogICAgICogQHBhcmFtIHsqfSB2bSDnu4Tku7blrp7kvosNCiAgICAgKi8KICAgIHVucmVnaXN0ZXJWTTogZnVuY3Rpb24gdW5yZWdpc3RlclZNKHR5cGUsIHZtKSB7CiAgICAgIGZvciAodmFyIGkgPSB0aGlzLnZtcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgewogICAgICAgIGlmICh0aGlzLnZtc1tpXSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CgogICAgICAgIGlmICh0aGlzLnZtc1tpXS50eXBlID09PSB0eXBlICYmIHRoaXMudm1zW2ldLnZtID09PSB2bSkgewogICAgICAgICAgaWYgKGkgPCA0KSB7CiAgICAgICAgICAgIC8vIOWGhee9rumihOeVmXZt5pWwCiAgICAgICAgICAgIHRoaXMudm1zW2ldID0gdW5kZWZpbmVkOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy52bXMuc3BsaWNlKGksIDEpOwogICAgICAgICAgfQoKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0pOyAvLyDlhrvnu5PlpITnkIbvvIzpnIDopoHmianlsZXmlbDmja7nmoTor53vvIzkvb/nlKhjcnVkLnVwZGF0ZVByb3AobmFtZSwgdmFsdWUp77yM5LulY3J1ZC5wcm9wcy5uYW1l5b2i5byP6K6/6Zeu77yM6L+Z5Liq5piv5ZON5bqU5byP55qE77yM5Y+v5Lul5YGa5pWw5o2u57uR5a6aCgogIE9iamVjdC5mcmVlemUoY3J1ZCk7CiAgcmV0dXJuIGNydWQ7Cn0gLy8gaG9vayBWTQoKCmZ1bmN0aW9uIGNhbGxWbUhvb2soY3J1ZCwgaG9vaykgewogIGlmIChjcnVkLmRlYnVnKSB7CiAgICBjb25zb2xlLmxvZygnY2FsbFZtSG9vazogJyArIGhvb2spOwogIH0KCiAgdmFyIHRhZ0hvb2sgPSBjcnVkLnRhZyA/IGhvb2sgKyAnJCcgKyBjcnVkLnRhZyA6IG51bGw7CiAgdmFyIHJldCA9IHRydWU7CiAgdmFyIG5hcmdzID0gW2NydWRdOwoKICBmb3IgKHZhciBpID0gMjsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7ICsraSkgewogICAgbmFyZ3MucHVzaChhcmd1bWVudHNbaV0pOwogIH0gLy8g5pyJ5Lqb57uE5Lu25omu5ryU5LqG5aSa5Liq6KeS6Imy77yM6LCD55So6ZKp5a2Q5pe277yM6ZyA6KaB5Y676YeNCgoKICB2YXIgdm1TZXQgPSBuZXcgU2V0KCk7CiAgY3J1ZC52bXMuZm9yRWFjaChmdW5jdGlvbiAodm0pIHsKICAgIHJldHVybiB2bSAmJiB2bVNldC5hZGQodm0udm0pOwogIH0pOwogIHZtU2V0LmZvckVhY2goZnVuY3Rpb24gKHZtKSB7CiAgICBpZiAodm1baG9va10pIHsKICAgICAgcmV0ID0gdm1baG9va10uYXBwbHkodm0sIG5hcmdzKSAhPT0gZmFsc2UgJiYgcmV0OwogICAgfQoKICAgIGlmICh0YWdIb29rICYmIHZtW3RhZ0hvb2tdKSB7CiAgICAgIHJldCA9IHZtW3RhZ0hvb2tdLmFwcGx5KHZtLCBuYXJncykgIT09IGZhbHNlICYmIHJldDsKICAgIH0KICB9KTsKICByZXR1cm4gcmV0Owp9CgpmdW5jdGlvbiBtZXJnZU9wdGlvbnMoc3JjLCBvcHRzKSB7CiAgdmFyIG9wdHNSZXQgPSBfb2JqZWN0U3ByZWFkKHt9LCBzcmMpOwoKICBmb3IgKHZhciBrZXkgaW4gc3JjKSB7CiAgICBpZiAob3B0cy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7CiAgICAgIG9wdHNSZXRba2V5XSA9IG9wdHNba2V5XTsKICAgIH0KICB9CgogIHJldHVybiBvcHRzUmV0Owp9Ci8qKg0KICog5p+l5om+Y3J1ZA0KICogQHBhcmFtIHsqfSB2bQ0KICogQHBhcmFtIHtzdHJpbmd9IHRhZw0KICovCgoKZnVuY3Rpb24gbG9va3VwQ3J1ZCh2bSwgdGFnKSB7CiAgdGFnID0gdGFnIHx8IHZtLiRhdHRyc1snY3J1ZC10YWcnXSB8fCAnZGVmYXVsdCc7IC8vIGZ1bmN0aW9uIGxvb2t1cENydWQodm0sIHRhZykgewoKICBpZiAodm0uJGNydWQpIHsKICAgIHZhciByZXQgPSB2bS4kY3J1ZFt0YWddOwoKICAgIGlmIChyZXQpIHsKICAgICAgcmV0dXJuIHJldDsKICAgIH0KICB9CgogIHJldHVybiB2bS4kcGFyZW50ID8gbG9va3VwQ3J1ZCh2bS4kcGFyZW50LCB0YWcpIDogdW5kZWZpbmVkOwp9Ci8qKg0KICogY3J1ZOS4u+mhtQ0KICovCgoKZnVuY3Rpb24gcHJlc2VudGVyKGNydWQpIHsKICBpZiAoY3J1ZCkgewogICAgY29uc29sZS53YXJuKCdbQ1JVRCB3YXJuXTogJyArICdwbGVhc2UgdXNlICRvcHRpb25zLmNydWRzKCkgeyByZXR1cm4gQ1JVRCguLi4pIG9yIFtDUlVEKC4uLiksIC4uLl0gfScpOwogIH0KCiAgcmV0dXJuIHsKICAgIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICAgIC8vIOWcqGRhdGHkuK3ov5Tlm55jcnVk77yM5piv5Li65LqG5bCGY3J1ZOS4juW9k+WJjeWunuS+i+WFs+iBlO+8jOe7hOS7tuingua1i2NydWTnm7jlhbPlsZ7mgKflj5jljJYKICAgICAgcmV0dXJuIHsKICAgICAgICBjcnVkOiB0aGlzLmNydWQKICAgICAgfTsKICAgIH0sCiAgICBiZWZvcmVDcmVhdGU6IGZ1bmN0aW9uIGJlZm9yZUNyZWF0ZSgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB0aGlzLiRjcnVkID0gdGhpcy4kY3J1ZCB8fCB7fTsKICAgICAgdmFyIGNydWRzID0gdGhpcy4kb3B0aW9ucy5jcnVkcyBpbnN0YW5jZW9mIEZ1bmN0aW9uID8gdGhpcy4kb3B0aW9ucy5jcnVkcygpIDogY3J1ZDsKCiAgICAgIGlmICghKGNydWRzIGluc3RhbmNlb2YgQXJyYXkpKSB7CiAgICAgICAgY3J1ZHMgPSBbY3J1ZHNdOwogICAgICB9CgogICAgICBjcnVkcy5mb3JFYWNoKGZ1bmN0aW9uIChlbGUpIHsKICAgICAgICBpZiAoX3RoaXMzLiRjcnVkW2VsZS50YWddKSB7CiAgICAgICAgICBjb25zb2xlLmVycm9yKCdbQ1JVRCBlcnJvcl06ICcgKyAnY3J1ZCB3aXRoIHRhZyBbJyArIGVsZS50YWcgKyAnIGlzIGFscmVhZHkgZXhpc3QnKTsKICAgICAgICB9CgogICAgICAgIF90aGlzMy4kY3J1ZFtlbGUudGFnXSA9IGVsZTsKICAgICAgICBlbGUucmVnaXN0ZXJWTSgncHJlc2VudGVyJywgX3RoaXMzLCAwKTsKICAgICAgfSk7CiAgICAgIHRoaXMuY3J1ZCA9IHRoaXMuJGNydWRbJ2RlZmFsdXQnXSB8fCBjcnVkc1swXTsKICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgIHBhcnNlVGltZTogcGFyc2VUaW1lCiAgICB9LAogICAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgICAgZm9yICh2YXIgayBpbiB0aGlzLiRjcnVkKSB7CiAgICAgICAgaWYgKHRoaXMuJGNydWRba10ucXVlcnlPblByZXNlbnRlckNyZWF0ZWQpIHsKICAgICAgICAgIHRoaXMuJGNydWRba10udG9RdWVyeSgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGRlc3Ryb3llZDogZnVuY3Rpb24gZGVzdHJveWVkKCkgewogICAgICBmb3IgKHZhciBrIGluIHRoaXMuJGNydWQpIHsKICAgICAgICB0aGlzLiRjcnVkW2tdLnVucmVnaXN0ZXJWTSgncHJlc2VudGVyJywgdGhpcyk7CiAgICAgIH0KICAgIH0sCiAgICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgICAvLyDlpoLmnpx0YWJsZeacquWunuS+i+WMlu+8iOS+i+WmguS9v+eUqOS6hnYtaWbvvInvvIzor7fnqI3lkI7lnKjpgILlvZPml7bmnLpjcnVkLmF0dGNoVGFibGXliLfmlrB0YWJsZeS/oeaBrwogICAgICBpZiAodGhpcy4kcmVmcy50YWJsZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgdGhpcy5jcnVkLmF0dGNoVGFibGUoKTsKICAgICAgfQogICAgfQogIH07Cn0KLyoqDQogKiDlpLTpg6gNCiAqLwoKCmZ1bmN0aW9uIGhlYWRlcigpIHsKICByZXR1cm4gewogICAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBjcnVkOiB0aGlzLmNydWQsCiAgICAgICAgcXVlcnk6IHRoaXMuY3J1ZC5xdWVyeQogICAgICB9OwogICAgfSwKICAgIGJlZm9yZUNyZWF0ZTogZnVuY3Rpb24gYmVmb3JlQ3JlYXRlKCkgewogICAgICB0aGlzLmNydWQgPSBsb29rdXBDcnVkKHRoaXMpOwogICAgICB0aGlzLmNydWQucmVnaXN0ZXJWTSgnaGVhZGVyJywgdGhpcywgMSk7CiAgICB9LAogICAgZGVzdHJveWVkOiBmdW5jdGlvbiBkZXN0cm95ZWQoKSB7CiAgICAgIHRoaXMuY3J1ZC51bnJlZ2lzdGVyVk0oJ2hlYWRlcicsIHRoaXMpOwogICAgfQogIH07Cn0KLyoqDQogKiDliIbpobUNCiAqLwoKCmZ1bmN0aW9uIHBhZ2luYXRpb24oKSB7CiAgcmV0dXJuIHsKICAgIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgY3J1ZDogdGhpcy5jcnVkLAogICAgICAgIHBhZ2U6IHRoaXMuY3J1ZC5wYWdlCiAgICAgIH07CiAgICB9LAogICAgYmVmb3JlQ3JlYXRlOiBmdW5jdGlvbiBiZWZvcmVDcmVhdGUoKSB7CiAgICAgIHRoaXMuY3J1ZCA9IGxvb2t1cENydWQodGhpcyk7CiAgICAgIHRoaXMuY3J1ZC5yZWdpc3RlclZNKCdwYWdpbmF0aW9uJywgdGhpcywgMik7CiAgICB9LAogICAgZGVzdHJveWVkOiBmdW5jdGlvbiBkZXN0cm95ZWQoKSB7CiAgICAgIHRoaXMuY3J1ZC51bnJlZ2lzdGVyVk0oJ3BhZ2luYXRpb24nLCB0aGlzKTsKICAgIH0KICB9Owp9Ci8qKg0KICog6KGo5Y2VDQogKi8KCgpmdW5jdGlvbiBmb3JtKGRlZmF1bHRGb3JtKSB7CiAgcmV0dXJuIHsKICAgIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgY3J1ZDogdGhpcy5jcnVkLAogICAgICAgIGZvcm06IHRoaXMuY3J1ZC5mb3JtCiAgICAgIH07CiAgICB9LAogICAgYmVmb3JlQ3JlYXRlOiBmdW5jdGlvbiBiZWZvcmVDcmVhdGUoKSB7CiAgICAgIHRoaXMuY3J1ZCA9IGxvb2t1cENydWQodGhpcyk7CiAgICAgIHRoaXMuY3J1ZC5yZWdpc3RlclZNKCdmb3JtJywgdGhpcywgMyk7CiAgICB9LAogICAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgICAgdGhpcy5jcnVkLmRlZmF1bHRGb3JtID0gZGVmYXVsdEZvcm07CiAgICAgIHRoaXMuY3J1ZC5yZXNldEZvcm0oKTsKICAgIH0sCiAgICBkZXN0cm95ZWQ6IGZ1bmN0aW9uIGRlc3Ryb3llZCgpIHsKICAgICAgdGhpcy5jcnVkLnVucmVnaXN0ZXJWTSgnZm9ybScsIHRoaXMpOwogICAgfQogIH07Cn0KLyoqDQogKiBjcnVkDQogKi8KCgpmdW5jdGlvbiBjcnVkKCkgewogIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTsKICB2YXIgZGVmYXVsdE9wdGlvbnMgPSB7CiAgICB0eXBlOiB1bmRlZmluZWQKICB9OwogIG9wdGlvbnMgPSBtZXJnZU9wdGlvbnMoZGVmYXVsdE9wdGlvbnMsIG9wdGlvbnMpOwogIHJldHVybiB7CiAgICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgICByZXR1cm4gewogICAgICAgIGNydWQ6IHRoaXMuY3J1ZAogICAgICB9OwogICAgfSwKICAgIGJlZm9yZUNyZWF0ZTogZnVuY3Rpb24gYmVmb3JlQ3JlYXRlKCkgewogICAgICB0aGlzLmNydWQgPSBsb29rdXBDcnVkKHRoaXMpOwogICAgICB0aGlzLmNydWQucmVnaXN0ZXJWTShvcHRpb25zLnR5cGUsIHRoaXMpOwogICAgfSwKICAgIGRlc3Ryb3llZDogZnVuY3Rpb24gZGVzdHJveWVkKCkgewogICAgICB0aGlzLmNydWQudW5yZWdpc3RlclZNKG9wdGlvbnMudHlwZSwgdGhpcyk7CiAgICB9CiAgfTsKfQovKioNCiAqIENSVUTpkqnlrZANCiAqLwoKCkNSVUQuSE9PSyA9IHsKICAvKiog5Yi35pawIC0g5LmL5YmNICovCiAgYmVmb3JlUmVmcmVzaDogJ2JlZm9yZUNydWRSZWZyZXNoJywKCiAgLyoqIOWIt+aWsCAtIOS5i+WQjiAqLwogIGFmdGVyUmVmcmVzaDogJ2FmdGVyQ3J1ZFJlZnJlc2gnLAoKICAvKiog5Yig6ZmkIC0g5LmL5YmNICovCiAgYmVmb3JlRGVsZXRlOiAnYmVmb3JlQ3J1ZERlbGV0ZScsCgogIC8qKiDliKDpmaQgLSDkuYvlkI4gKi8KICBhZnRlckRlbGV0ZTogJ2FmdGVyQ3J1ZERlbGV0ZScsCgogIC8qKiDliKDpmaTlj5bmtoggLSDkuYvliY0gKi8KICBiZWZvcmVEZWxldGVDYW5jZWw6ICdiZWZvcmVDcnVkRGVsZXRlQ2FuY2VsJywKCiAgLyoqIOWIoOmZpOWPlua2iCAtIOS5i+WQjiAqLwogIGFmdGVyRGVsZXRlQ2FuY2VsOiAnYWZ0ZXJDcnVkRGVsZXRlQ2FuY2VsJywKCiAgLyoqIOaWsOW7uiAtIOS5i+WJjSAqLwogIGJlZm9yZVRvQWRkOiAnYmVmb3JlQ3J1ZFRvQWRkJywKCiAgLyoqIOaWsOW7uiAtIOS5i+WQjiAqLwogIGFmdGVyVG9BZGQ6ICdhZnRlckNydWRUb0FkZCcsCgogIC8qKiDnvJbovpEgLSDkuYvliY0gKi8KICBiZWZvcmVUb0VkaXQ6ICdiZWZvcmVDcnVkVG9FZGl0JywKCiAgLyoqIOe8lui+kSAtIOS5i+WQjiAqLwogIGFmdGVyVG9FZGl0OiAnYWZ0ZXJDcnVkVG9FZGl0JywKCiAgLyoqIOW8gOWniyAi5paw5bu6L+e8lui+kSIgLSDkuYvliY0gKi8KICBiZWZvcmVUb0NVOiAnYmVmb3JlQ3J1ZFRvQ1UnLAoKICAvKiog5byA5aeLICLmlrDlu7ov57yW6L6RIiAtIOS5i+WQjiAqLwogIGFmdGVyVG9DVTogJ2FmdGVyQ3J1ZFRvQ1UnLAoKICAvKiogIuaWsOW7ui/nvJbovpEiIOmqjOivgSAtIOS5i+WJjSAqLwogIGJlZm9yZVZhbGlkYXRlQ1U6ICdiZWZvcmVDcnVkVmFsaWRhdGVDVScsCgogIC8qKiAi5paw5bu6L+e8lui+kSIg6aqM6K+BIC0g5LmL5ZCOICovCiAgYWZ0ZXJWYWxpZGF0ZUNVOiAnYWZ0ZXJDcnVkVmFsaWRhdGVDVScsCgogIC8qKiDmt7vliqDlj5bmtoggLSDkuYvliY0gKi8KICBiZWZvcmVBZGRDYW5jZWw6ICdiZWZvcmVDcnVkQWRkQ2FuY2VsJywKCiAgLyoqIOa3u+WKoOWPlua2iCAtIOS5i+WQjiAqLwogIGFmdGVyQWRkQ2FuY2VsOiAnYWZ0ZXJDcnVkQWRkQ2FuY2VsJywKCiAgLyoqIOe8lui+keWPlua2iCAtIOS5i+WJjSAqLwogIGJlZm9yZUVkaXRDYW5jZWw6ICdiZWZvcmVDcnVkRWRpdENhbmNlbCcsCgogIC8qKiDnvJbovpHlj5bmtoggLSDkuYvlkI4gKi8KICBhZnRlckVkaXRDYW5jZWw6ICdhZnRlckNydWRFZGl0Q2FuY2VsJywKCiAgLyoqIOaPkOS6pCAtIOS5i+WJjSAqLwogIGJlZm9yZVN1Ym1pdDogJ2JlZm9yZUNydWRTdWJtaXRDVScsCgogIC8qKiDmj5DkuqQgLSDkuYvlkI4gKi8KICBhZnRlclN1Ym1pdDogJ2FmdGVyQ3J1ZFN1Ym1pdENVJywKICBhZnRlckFkZEVycm9yOiAnYWZ0ZXJDcnVkQWRkRXJyb3InLAogIGFmdGVyRWRpdEVycm9yOiAnYWZ0ZXJDcnVkRWRpdEVycm9yJwp9OwovKioNCiAqIENSVUTnirbmgIENCiAqLwoKQ1JVRC5TVEFUVVMgPSB7CiAgTk9STUFMOiAwLAogIFBSRVBBUkVEOiAxLAogIFBST0NFU1NJTkc6IDIKfTsKLyoqDQogKiBDUlVE6YCa55+l57G75Z6LDQogKi8KCkNSVUQuTk9USUZJQ0FUSU9OX1RZUEUgPSB7CiAgU1VDQ0VTUzogJ3N1Y2Nlc3MnLAogIFdBUk5JTkc6ICd3YXJuaW5nJywKICBJTkZPOiAnaW5mbycsCiAgRVJST1I6ICdlcnJvcicKfTsKZXhwb3J0IGRlZmF1bHQgQ1JVRDsKZXhwb3J0IHsgcHJlc2VudGVyLCBoZWFkZXIsIGZvcm0sIHBhZ2luYXRpb24sIGNydWQgfTs="},{"version":3,"names":["initData","download","parseTime","downloadFile","Vue","CRUD","options","defaultOptions","tag","idField","title","url","data","selections","query","params","form","defaultForm","sort","time","crudMethod","add","del","id","edit","get","optShow","reset","props","queryOnPresenterCreated","debug","mergeOptions","dataStatus","status","STATUS","NORMAL","cu","PREPARED","PROCESSING","Error","crud","msg","submit","page","size","total","loading","downloadLoading","delAllLoading","methods","submitSuccessNotify","notify","NOTIFICATION_TYPE","SUCCESS","addSuccessNotify","editSuccessNotify","delSuccessNotify","toQuery","refresh","callVmHook","HOOK","beforeRefresh","Promise","resolve","reject","getQueryParams","then","table","getTable","lazy","store","states","treeData","lazyTreeNodeMap","totalElements","content","resetDataStatus","setTimeout","afterRefresh","catch","err","toAdd","resetForm","beforeToAdd","beforeToCU","afterToAdd","afterToCU","toEdit","JSON","parse","stringify","beforeToEdit","getDataStatus","getDataId","afterToEdit","toDelete","delete","cancelDelete","beforeDeleteCancel","afterDeleteCancel","cancelCU","addStatus","editStatus","beforeAddCancel","beforeEditCancel","afterAddCancel","afterEditCancel","findVM","$refs","clearValidate","submitCU","beforeValidateCU","validate","valid","afterValidateCU","doAdd","doEdit","beforeSubmit","afterSubmit","afterAddError","afterEditError","doDelete","delAll","ids","Array","forEach","val","push","beforeDelete","dleChangePage","afterDelete","doExport","result","Object","keys","length","item","undefined","pageChangeHandler","e","sizeChangeHandler","selectionChangeHandler","resetQuery","defaultQuery","key","apply","crudFrom","hasOwnProperty","set","resetStatus","datas","children","selectAllChange","selection","selectChange","clearSelection","row","find","toggleRowSelection","splice","findIndex","type","vms","vm","INFO","$notify","duration","updateProp","name","value","attchTable","that","$on","expanded","ele","assign","observable","registerVM","index","vmObj","Math","max","unregisterVM","i","freeze","hook","console","log","tagHook","ret","nargs","arguments","vmSet","Set","src","opts","optsRet","lookupCrud","$attrs","$crud","$parent","presenter","warn","beforeCreate","cruds","$options","Function","error","created","k","destroyed","mounted","header","pagination","WARNING","ERROR"],"sources":["D:/test frontend system/vue-admin-template-master/vue-admin-template-master/src/components/Crud/crud.js"],"sourcesContent":["import { initData, download } from '@/api/data'\r\nimport { parseTime, downloadFile } from '@/utils/index'\r\nimport Vue from 'vue'\r\n\r\n/**\r\n * CRUD配置\r\n * @author moxun\r\n * @param {*} options <br>\r\n * @return crud instance.\r\n * @example\r\n * 要使用多crud时，请在关联crud的组件处使用crud-tag进行标记，如：<jobForm :job-status=\"dict.job_status\" crud-tag=\"job\" />\r\n */\r\nfunction CRUD(options) {\r\n  const defaultOptions = {\r\n    tag: 'default',\r\n    // id字段名\r\n    idField: 'id',\r\n    // 标题\r\n    title: '',\r\n    // 请求数据的url\r\n    url: '',\r\n    // 表格数据\r\n    data: [],\r\n    // 选择项\r\n    selections: [],\r\n    // 待查询的对象\r\n    query: {},\r\n    // 查询数据的参数\r\n    params: {},\r\n    // Form 表单\r\n    form: {},\r\n    // 重置表单\r\n    defaultForm: () => {},\r\n    // 排序规则，默认 id 降序， 支持多字段排序 ['id,desc', 'createTime,asc']\r\n    sort: ['id,desc'],\r\n    // 等待时间\r\n    time: 50,\r\n    // CRUD Method\r\n    crudMethod: {\r\n      add: (form) => {},\r\n      del: (id) => {},\r\n      edit: (form) => {},\r\n      get: (id) => {}\r\n    },\r\n    // 主页操作栏显示哪些按钮\r\n    optShow: {\r\n      add: true,\r\n      edit: true,\r\n      del: true,\r\n      download: true,\r\n      reset: true\r\n    },\r\n    // 自定义一些扩展属性\r\n    props: {},\r\n    // 在主页准备\r\n    queryOnPresenterCreated: true,\r\n    // 调试开关\r\n    debug: false\r\n  }\r\n  options = mergeOptions(defaultOptions, options)\r\n  const data = {\r\n    ...options,\r\n    // 记录数据状态\r\n    dataStatus: {},\r\n    status: {\r\n      add: CRUD.STATUS.NORMAL,\r\n      edit: CRUD.STATUS.NORMAL,\r\n      // 添加或编辑状态\r\n      get cu() {\r\n        if (this.add === CRUD.STATUS.NORMAL && this.edit === CRUD.STATUS.NORMAL) {\r\n          return CRUD.STATUS.NORMAL\r\n        } else if (this.add === CRUD.STATUS.PREPARED || this.edit === CRUD.STATUS.PREPARED) {\r\n          return CRUD.STATUS.PREPARED\r\n        } else if (this.add === CRUD.STATUS.PROCESSING || this.edit === CRUD.STATUS.PROCESSING) {\r\n          return CRUD.STATUS.PROCESSING\r\n        }\r\n        throw new Error('wrong crud\\'s cu status')\r\n      },\r\n      // 标题\r\n      get title() {\r\n        return this.add > CRUD.STATUS.NORMAL ? `新增${crud.title}` : this.edit > CRUD.STATUS.NORMAL ? `编辑${crud.title}` : crud.title\r\n      }\r\n    },\r\n    msg: {\r\n      submit: '提交成功',\r\n      add: '新增成功',\r\n      edit: '编辑成功',\r\n      del: '删除成功'\r\n    },\r\n    page: {\r\n      // 页码\r\n      page: 0,\r\n      // 每页数据条数\r\n      size: 10,\r\n      // 总数据条数\r\n      total: 0\r\n    },\r\n    // 整体loading\r\n    loading: false,\r\n    // 导出的 Loading\r\n    downloadLoading: false,\r\n    // 删除的 Loading\r\n    delAllLoading: false\r\n  }\r\n  const methods = {\r\n    /**\r\n     * 通用的提示\r\n     */\r\n    submitSuccessNotify() {\r\n      crud.notify(crud.msg.submit, CRUD.NOTIFICATION_TYPE.SUCCESS)\r\n    },\r\n    addSuccessNotify() {\r\n      crud.notify(crud.msg.add, CRUD.NOTIFICATION_TYPE.SUCCESS)\r\n    },\r\n    editSuccessNotify() {\r\n      crud.notify(crud.msg.edit, CRUD.NOTIFICATION_TYPE.SUCCESS)\r\n    },\r\n    delSuccessNotify() {\r\n      crud.notify(crud.msg.del, CRUD.NOTIFICATION_TYPE.SUCCESS)\r\n    },\r\n    // 搜索\r\n    toQuery() {\r\n      crud.page.page = 1\r\n      crud.refresh()\r\n    },\r\n    // 刷新\r\n    refresh() {\r\n      if (!callVmHook(crud, CRUD.HOOK.beforeRefresh)) {\r\n        return\r\n      }\r\n      return new Promise((resolve, reject) => {\r\n        crud.loading = true\r\n        // 请求数据\r\n        initData(crud.url, crud.getQueryParams()).then(data => {\r\n          const table = crud.getTable()\r\n          if (table && table.lazy) { // 懒加载子节点数据，清掉已加载的数据\r\n            table.store.states.treeData = {}\r\n            table.store.states.lazyTreeNodeMap = {}\r\n          }\r\n          crud.page.total = data.totalElements\r\n          crud.data = data.content\r\n          crud.resetDataStatus()\r\n          // time 毫秒后显示表格\r\n          setTimeout(() => {\r\n            crud.loading = false\r\n            callVmHook(crud, CRUD.HOOK.afterRefresh)\r\n          }, crud.time)\r\n          resolve(data)\r\n        }).catch(err => {\r\n          crud.loading = false\r\n          reject(err)\r\n        })\r\n      })\r\n    },\r\n    /**\r\n     * 启动添加\r\n     */\r\n    toAdd() {\r\n      crud.resetForm()\r\n      if (!(callVmHook(crud, CRUD.HOOK.beforeToAdd, crud.form) && callVmHook(crud, CRUD.HOOK.beforeToCU, crud.form))) {\r\n        return\r\n      }\r\n      crud.status.add = CRUD.STATUS.PREPARED\r\n      callVmHook(crud, CRUD.HOOK.afterToAdd, crud.form)\r\n      callVmHook(crud, CRUD.HOOK.afterToCU, crud.form)\r\n    },\r\n    /**\r\n     * 启动编辑\r\n     * @param {*} data 数据项\r\n     */\r\n    toEdit(data) {\r\n      crud.resetForm(JSON.parse(JSON.stringify(data)))\r\n      if (!(callVmHook(crud, CRUD.HOOK.beforeToEdit, crud.form) && callVmHook(crud, CRUD.HOOK.beforeToCU, crud.form))) {\r\n        return\r\n      }\r\n      crud.status.edit = CRUD.STATUS.PREPARED\r\n      crud.getDataStatus(crud.getDataId(data)).edit = CRUD.STATUS.PREPARED\r\n      callVmHook(crud, CRUD.HOOK.afterToEdit, crud.form)\r\n      callVmHook(crud, CRUD.HOOK.afterToCU, crud.form)\r\n    },\r\n    /**\r\n     * 启动删除\r\n     * @param {*} data 数据项\r\n     */\r\n    toDelete(data) {\r\n      crud.getDataStatus(crud.getDataId(data)).delete = CRUD.STATUS.PREPARED\r\n    },\r\n    /**\r\n     * 取消删除\r\n     * @param {*} data 数据项\r\n     */\r\n    cancelDelete(data) {\r\n      if (!callVmHook(crud, CRUD.HOOK.beforeDeleteCancel, data)) {\r\n        return\r\n      }\r\n      crud.getDataStatus(crud.getDataId(data)).delete = CRUD.STATUS.NORMAL\r\n      callVmHook(crud, CRUD.HOOK.afterDeleteCancel, data)\r\n    },\r\n    /**\r\n     * 取消新增/编辑\r\n     */\r\n    cancelCU() {\r\n      const addStatus = crud.status.add\r\n      const editStatus = crud.status.edit\r\n      if (addStatus === CRUD.STATUS.PREPARED) {\r\n        if (!callVmHook(crud, CRUD.HOOK.beforeAddCancel, crud.form)) {\r\n          return\r\n        }\r\n        crud.status.add = CRUD.STATUS.NORMAL\r\n      }\r\n      if (editStatus === CRUD.STATUS.PREPARED) {\r\n        if (!callVmHook(crud, CRUD.HOOK.beforeEditCancel, crud.form)) {\r\n          return\r\n        }\r\n        crud.status.edit = CRUD.STATUS.NORMAL\r\n        crud.getDataStatus(crud.getDataId(crud.form)).edit = CRUD.STATUS.NORMAL\r\n      }\r\n      crud.resetForm()\r\n      if (addStatus === CRUD.STATUS.PREPARED) {\r\n        callVmHook(crud, CRUD.HOOK.afterAddCancel, crud.form)\r\n      }\r\n      if (editStatus === CRUD.STATUS.PREPARED) {\r\n        callVmHook(crud, CRUD.HOOK.afterEditCancel, crud.form)\r\n      }\r\n      // 清除表单验证\r\n      if (crud.findVM('form').$refs['form']) {\r\n        crud.findVM('form').$refs['form'].clearValidate()\r\n      }\r\n    },\r\n    /**\r\n     * 提交新增/编辑\r\n     */\r\n    submitCU() {\r\n      if (!callVmHook(crud, CRUD.HOOK.beforeValidateCU)) {\r\n        return\r\n      }\r\n      crud.findVM('form').$refs['form'].validate(valid => {\r\n        if (!valid) {\r\n          return\r\n        }\r\n        if (!callVmHook(crud, CRUD.HOOK.afterValidateCU)) {\r\n          return\r\n        }\r\n        if (crud.status.add === CRUD.STATUS.PREPARED) {\r\n          crud.doAdd()\r\n        } else if (crud.status.edit === CRUD.STATUS.PREPARED) {\r\n          crud.doEdit()\r\n        }\r\n      })\r\n    },\r\n    /**\r\n     * 执行添加\r\n     */\r\n    doAdd() {\r\n      if (!callVmHook(crud, CRUD.HOOK.beforeSubmit)) {\r\n        return\r\n      }\r\n      crud.status.add = CRUD.STATUS.PROCESSING\r\n      crud.crudMethod.add(crud.form).then(() => {\r\n        crud.status.add = CRUD.STATUS.NORMAL\r\n        crud.resetForm()\r\n        crud.addSuccessNotify()\r\n        callVmHook(crud, CRUD.HOOK.afterSubmit)\r\n        crud.toQuery()\r\n      }).catch(() => {\r\n        crud.status.add = CRUD.STATUS.PREPARED\r\n        callVmHook(crud, CRUD.HOOK.afterAddError)\r\n      })\r\n    },\r\n    /**\r\n     * 执行编辑\r\n     */\r\n    doEdit() {\r\n      if (!callVmHook(crud, CRUD.HOOK.beforeSubmit)) {\r\n        return\r\n      }\r\n      crud.status.edit = CRUD.STATUS.PROCESSING\r\n      crud.crudMethod.edit(crud.form).then(() => {\r\n        crud.status.edit = CRUD.STATUS.NORMAL\r\n        crud.getDataStatus(crud.getDataId(crud.form)).edit = CRUD.STATUS.NORMAL\r\n        crud.editSuccessNotify()\r\n        crud.resetForm()\r\n        callVmHook(crud, CRUD.HOOK.afterSubmit)\r\n        crud.refresh()\r\n      }).catch(() => {\r\n        crud.status.edit = CRUD.STATUS.PREPARED\r\n        callVmHook(crud, CRUD.HOOK.afterEditError)\r\n      })\r\n    },\r\n    /**\r\n     * 执行删除\r\n     * @param {*} data 数据项\r\n     */\r\n    doDelete(data) {\r\n      let delAll = false\r\n      let dataStatus\r\n      const ids = []\r\n      if (data instanceof Array) {\r\n        delAll = true\r\n        data.forEach(val => {\r\n          ids.push(this.getDataId(val))\r\n        })\r\n      } else {\r\n        ids.push(this.getDataId(data))\r\n        dataStatus = crud.getDataStatus(this.getDataId(data))\r\n      }\r\n      if (!callVmHook(crud, CRUD.HOOK.beforeDelete, data)) {\r\n        return\r\n      }\r\n      if (!delAll) {\r\n        dataStatus.delete = CRUD.STATUS.PROCESSING\r\n      }\r\n      return crud.crudMethod.del(ids).then(() => {\r\n        if (delAll) {\r\n          crud.delAllLoading = false\r\n        } else dataStatus.delete = CRUD.STATUS.PREPARED\r\n        crud.dleChangePage(1)\r\n        crud.delSuccessNotify()\r\n        callVmHook(crud, CRUD.HOOK.afterDelete, data)\r\n        crud.refresh()\r\n      }).catch(() => {\r\n        if (delAll) {\r\n          crud.delAllLoading = false\r\n        } else dataStatus.delete = CRUD.STATUS.PREPARED\r\n      })\r\n    },\r\n    /**\r\n     * 通用导出\r\n     */\r\n    doExport() {\r\n      crud.downloadLoading = true\r\n      download(crud.url + '/download', crud.getQueryParams()).then(result => {\r\n        downloadFile(result, crud.title + '数据', 'xlsx')\r\n        crud.downloadLoading = false\r\n      }).catch(() => {\r\n        crud.downloadLoading = false\r\n      })\r\n    },\r\n    /**\r\n     * 获取查询参数\r\n     */\r\n    getQueryParams: function() {\r\n      // 清除参数无值的情况\r\n      Object.keys(crud.query).length !== 0 && Object.keys(crud.query).forEach(item => {\r\n        if (crud.query[item] === null || crud.query[item] === '') crud.query[item] = undefined\r\n      })\r\n      Object.keys(crud.params).length !== 0 && Object.keys(crud.params).forEach(item => {\r\n        if (crud.params[item] === null || crud.params[item] === '') crud.params[item] = undefined\r\n      })\r\n      return {\r\n        page: crud.page.page - 1,\r\n        size: crud.page.size,\r\n        sort: crud.sort,\r\n        ...crud.query,\r\n        ...crud.params\r\n      }\r\n    },\r\n    // 当前页改变\r\n    pageChangeHandler(e) {\r\n      crud.page.page = e\r\n      crud.refresh()\r\n    },\r\n    // 每页条数改变\r\n    sizeChangeHandler(e) {\r\n      crud.page.size = e\r\n      crud.page.page = 1\r\n      crud.refresh()\r\n    },\r\n    // 预防删除第二页最后一条数据时，或者多选删除第二页的数据时，页码错误导致请求无数据\r\n    dleChangePage(size) {\r\n      if (crud.data.length === size && crud.page.page !== 1) {\r\n        crud.page.page -= 1\r\n      }\r\n    },\r\n    // 选择改变\r\n    selectionChangeHandler(val) {\r\n      crud.selections = val\r\n    },\r\n    /**\r\n     * 重置查询参数\r\n     * @param {Boolean} toQuery 重置后进行查询操作\r\n     */\r\n    resetQuery(toQuery = true) {\r\n      const defaultQuery = JSON.parse(JSON.stringify(crud.defaultQuery))\r\n      const query = crud.query\r\n      Object.keys(query).forEach(key => {\r\n        query[key] = defaultQuery[key]\r\n      })\r\n      // 重置参数\r\n      this.params = {}\r\n      if (toQuery) {\r\n        crud.toQuery()\r\n      }\r\n    },\r\n    /**\r\n     * 重置表单\r\n     * @param {Array} data 数据\r\n     */\r\n    resetForm(data) {\r\n      const form = data || (typeof crud.defaultForm === 'object' ? JSON.parse(JSON.stringify(crud.defaultForm)) : crud.defaultForm.apply(crud.findVM('form')))\r\n      const crudFrom = crud.form\r\n      for (const key in form) {\r\n        if (crudFrom.hasOwnProperty(key)) {\r\n          crudFrom[key] = form[key]\r\n        } else {\r\n          Vue.set(crudFrom, key, form[key])\r\n        }\r\n      }\r\n      // add by ghl 2020-10-04  页面重复添加信息时，下拉框的校验会存在，需要找工取消\r\n      if (crud.findVM('form').$refs['form']) {\r\n        crud.findVM('form').$refs['form'].clearValidate()\r\n      }\r\n    },\r\n    /**\r\n     * 重置数据状态\r\n     */\r\n    resetDataStatus() {\r\n      const dataStatus = {}\r\n      function resetStatus(datas) {\r\n        datas.forEach(e => {\r\n          dataStatus[crud.getDataId(e)] = {\r\n            delete: 0,\r\n            edit: 0\r\n          }\r\n          if (e.children) {\r\n            resetStatus(e.children)\r\n          }\r\n        })\r\n      }\r\n      resetStatus(crud.data)\r\n      crud.dataStatus = dataStatus\r\n    },\r\n    /**\r\n     * 获取数据状态\r\n     * @param {Number | String} id 数据项id\r\n     */\r\n    getDataStatus(id) {\r\n      return crud.dataStatus[id]\r\n    },\r\n    /**\r\n     * 用于树形表格多选, 选中所有\r\n     * @param selection\r\n     */\r\n    selectAllChange(selection) {\r\n      // 如果选中的数目与请求到的数目相同就选中子节点，否则就清空选中\r\n      if (selection && selection.length === crud.data.length) {\r\n        selection.forEach(val => {\r\n          crud.selectChange(selection, val)\r\n        })\r\n      } else {\r\n        crud.getTable().clearSelection()\r\n      }\r\n    },\r\n    /**\r\n     * 用于树形表格多选，单选的封装\r\n     * @param selection\r\n     * @param row\r\n     */\r\n    selectChange(selection, row) {\r\n      // 如果selection中存在row代表是选中，否则是取消选中\r\n      if (selection.find(val => { return crud.getDataId(val) === crud.getDataId(row) })) {\r\n        if (row.children) {\r\n          row.children.forEach(val => {\r\n            crud.getTable().toggleRowSelection(val, true)\r\n            selection.push(val)\r\n            if (val.children) {\r\n              crud.selectChange(selection, val)\r\n            }\r\n          })\r\n        }\r\n      } else {\r\n        crud.toggleRowSelection(selection, row)\r\n      }\r\n    },\r\n    /**\r\n     * 切换选中状态\r\n     * @param selection\r\n     * @param data\r\n     */\r\n    toggleRowSelection(selection, data) {\r\n      if (data.children) {\r\n        data.children.forEach(val => {\r\n          selection.splice(selection.findIndex(item => this.getDataId(item) === this.getDataId(val)), 1)\r\n          crud.getTable().toggleRowSelection(val, false)\r\n          if (val.children) {\r\n            crud.toggleRowSelection(selection, val)\r\n          }\r\n        })\r\n      }\r\n    },\r\n    findVM(type) {\r\n      return crud.vms.find(vm => vm && vm.type === type).vm\r\n    },\r\n    notify(title, type = CRUD.NOTIFICATION_TYPE.INFO) {\r\n      crud.vms[0].vm.$notify({\r\n        title,\r\n        type,\r\n        duration: 2500\r\n      })\r\n    },\r\n    updateProp(name, value) {\r\n      Vue.set(crud.props, name, value)\r\n    },\r\n    getDataId(data) {\r\n      return data[this.idField]\r\n    },\r\n    getTable() {\r\n      return this.findVM('presenter').$refs.table\r\n    },\r\n    attchTable() {\r\n      const table = this.getTable()\r\n      this.updateProp('table', table)\r\n      const that = this\r\n      table.$on('expand-change', (row, expanded) => {\r\n        if (!expanded) {\r\n          return\r\n        }\r\n        const lazyTreeNodeMap = table.store.states.lazyTreeNodeMap\r\n        row.children = lazyTreeNodeMap[crud.getDataId(row)]\r\n        if (row.children) {\r\n          row.children.forEach(ele => {\r\n            const id = crud.getDataId(ele)\r\n            if (that.dataStatus[id] === undefined) {\r\n              that.dataStatus[id] = {\r\n                delete: 0,\r\n                edit: 0\r\n              }\r\n            }\r\n          })\r\n        }\r\n      })\r\n    }\r\n  }\r\n  const crud = Object.assign({}, data)\r\n  // 可观测化\r\n  Vue.observable(crud)\r\n  // 附加方法\r\n  Object.assign(crud, methods)\r\n  // 记录初始默认的查询参数，后续重置查询时使用\r\n  Object.assign(crud, {\r\n    defaultQuery: JSON.parse(JSON.stringify(data.query)),\r\n    // 预留4位存储：组件 主页、头部、分页、表单，调试查看也方便找\r\n    vms: Array(4),\r\n    /**\r\n     * 注册组件实例\r\n     * @param {String} type 类型\r\n     * @param {*} vm 组件实例\r\n     * @param {Number} index 该参数内部使用\r\n     */\r\n    registerVM(type, vm, index = -1) {\r\n      const vmObj = {\r\n        type,\r\n        vm: vm\r\n      }\r\n      if (index < 0) {\r\n        this.vms.push(vmObj)\r\n        return\r\n      }\r\n      if (index < 4) { // 内置预留vm数\r\n        this.vms[index] = vmObj\r\n        return\r\n      }\r\n      this.vms.length = Math.max(this.vms.length, index)\r\n      this.vms.splice(index, 1, vmObj)\r\n    },\r\n    /**\r\n     * 取消注册组件实例\r\n     * @param {*} vm 组件实例\r\n     */\r\n    unregisterVM(type, vm) {\r\n      for (let i = this.vms.length - 1; i >= 0; i--) {\r\n        if (this.vms[i] === undefined) {\r\n          continue\r\n        }\r\n        if (this.vms[i].type === type && this.vms[i].vm === vm) {\r\n          if (i < 4) { // 内置预留vm数\r\n            this.vms[i] = undefined\r\n          } else {\r\n            this.vms.splice(i, 1)\r\n          }\r\n          break\r\n        }\r\n      }\r\n    }\r\n  })\r\n  // 冻结处理，需要扩展数据的话，使用crud.updateProp(name, value)，以crud.props.name形式访问，这个是响应式的，可以做数据绑定\r\n  Object.freeze(crud)\r\n  return crud\r\n}\r\n\r\n// hook VM\r\nfunction callVmHook(crud, hook) {\r\n  if (crud.debug) {\r\n    console.log('callVmHook: ' + hook)\r\n  }\r\n  const tagHook = crud.tag ? hook + '$' + crud.tag : null\r\n  let ret = true\r\n  const nargs = [crud]\r\n  for (let i = 2; i < arguments.length; ++i) {\r\n    nargs.push(arguments[i])\r\n  }\r\n  // 有些组件扮演了多个角色，调用钩子时，需要去重\r\n  const vmSet = new Set()\r\n  crud.vms.forEach(vm => vm && vmSet.add(vm.vm))\r\n  vmSet.forEach(vm => {\r\n    if (vm[hook]) {\r\n      ret = vm[hook].apply(vm, nargs) !== false && ret\r\n    }\r\n    if (tagHook && vm[tagHook]) {\r\n      ret = vm[tagHook].apply(vm, nargs) !== false && ret\r\n    }\r\n  })\r\n  return ret\r\n}\r\n\r\nfunction mergeOptions(src, opts) {\r\n  const optsRet = {\r\n    ...src\r\n  }\r\n  for (const key in src) {\r\n    if (opts.hasOwnProperty(key)) {\r\n      optsRet[key] = opts[key]\r\n    }\r\n  }\r\n  return optsRet\r\n}\r\n\r\n/**\r\n * 查找crud\r\n * @param {*} vm\r\n * @param {string} tag\r\n */\r\nfunction lookupCrud(vm, tag) {\r\n  tag = tag || vm.$attrs['crud-tag'] || 'default'\r\n  // function lookupCrud(vm, tag) {\r\n  if (vm.$crud) {\r\n    const ret = vm.$crud[tag]\r\n    if (ret) {\r\n      return ret\r\n    }\r\n  }\r\n  return vm.$parent ? lookupCrud(vm.$parent, tag) : undefined\r\n}\r\n\r\n/**\r\n * crud主页\r\n */\r\nfunction presenter(crud) {\r\n  if (crud) {\r\n    console.warn('[CRUD warn]: ' + 'please use $options.cruds() { return CRUD(...) or [CRUD(...), ...] }')\r\n  }\r\n  return {\r\n    data() {\r\n      // 在data中返回crud，是为了将crud与当前实例关联，组件观测crud相关属性变化\r\n      return {\r\n        crud: this.crud\r\n      }\r\n    },\r\n    beforeCreate() {\r\n      this.$crud = this.$crud || {}\r\n      let cruds = this.$options.cruds instanceof Function ? this.$options.cruds() : crud\r\n      if (!(cruds instanceof Array)) {\r\n        cruds = [cruds]\r\n      }\r\n      cruds.forEach(ele => {\r\n        if (this.$crud[ele.tag]) {\r\n          console.error('[CRUD error]: ' + 'crud with tag [' + ele.tag + ' is already exist')\r\n        }\r\n        this.$crud[ele.tag] = ele\r\n        ele.registerVM('presenter', this, 0)\r\n      })\r\n      this.crud = this.$crud['defalut'] || cruds[0]\r\n    },\r\n    methods: {\r\n      parseTime\r\n    },\r\n    created() {\r\n      for (const k in this.$crud) {\r\n        if (this.$crud[k].queryOnPresenterCreated) {\r\n          this.$crud[k].toQuery()\r\n        }\r\n      }\r\n    },\r\n    destroyed() {\r\n      for (const k in this.$crud) {\r\n        this.$crud[k].unregisterVM('presenter', this)\r\n      }\r\n    },\r\n    mounted() {\r\n      // 如果table未实例化（例如使用了v-if），请稍后在适当时机crud.attchTable刷新table信息\r\n      if (this.$refs.table !== undefined) {\r\n        this.crud.attchTable()\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * 头部\r\n */\r\nfunction header() {\r\n  return {\r\n    data() {\r\n      return {\r\n        crud: this.crud,\r\n        query: this.crud.query\r\n      }\r\n    },\r\n    beforeCreate() {\r\n      this.crud = lookupCrud(this)\r\n      this.crud.registerVM('header', this, 1)\r\n    },\r\n    destroyed() {\r\n      this.crud.unregisterVM('header', this)\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * 分页\r\n */\r\nfunction pagination() {\r\n  return {\r\n    data() {\r\n      return {\r\n        crud: this.crud,\r\n        page: this.crud.page\r\n      }\r\n    },\r\n    beforeCreate() {\r\n      this.crud = lookupCrud(this)\r\n      this.crud.registerVM('pagination', this, 2)\r\n    },\r\n    destroyed() {\r\n      this.crud.unregisterVM('pagination', this)\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * 表单\r\n */\r\nfunction form(defaultForm) {\r\n  return {\r\n    data() {\r\n      return {\r\n        crud: this.crud,\r\n        form: this.crud.form\r\n      }\r\n    },\r\n    beforeCreate() {\r\n      this.crud = lookupCrud(this)\r\n      this.crud.registerVM('form', this, 3)\r\n    },\r\n    created() {\r\n      this.crud.defaultForm = defaultForm\r\n      this.crud.resetForm()\r\n    },\r\n    destroyed() {\r\n      this.crud.unregisterVM('form', this)\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * crud\r\n */\r\nfunction crud(options = {}) {\r\n  const defaultOptions = {\r\n    type: undefined\r\n  }\r\n  options = mergeOptions(defaultOptions, options)\r\n  return {\r\n    data() {\r\n      return {\r\n        crud: this.crud\r\n      }\r\n    },\r\n    beforeCreate() {\r\n      this.crud = lookupCrud(this)\r\n      this.crud.registerVM(options.type, this)\r\n    },\r\n    destroyed() {\r\n      this.crud.unregisterVM(options.type, this)\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * CRUD钩子\r\n */\r\nCRUD.HOOK = {\r\n  /** 刷新 - 之前 */\r\n  beforeRefresh: 'beforeCrudRefresh',\r\n  /** 刷新 - 之后 */\r\n  afterRefresh: 'afterCrudRefresh',\r\n  /** 删除 - 之前 */\r\n  beforeDelete: 'beforeCrudDelete',\r\n  /** 删除 - 之后 */\r\n  afterDelete: 'afterCrudDelete',\r\n  /** 删除取消 - 之前 */\r\n  beforeDeleteCancel: 'beforeCrudDeleteCancel',\r\n  /** 删除取消 - 之后 */\r\n  afterDeleteCancel: 'afterCrudDeleteCancel',\r\n  /** 新建 - 之前 */\r\n  beforeToAdd: 'beforeCrudToAdd',\r\n  /** 新建 - 之后 */\r\n  afterToAdd: 'afterCrudToAdd',\r\n  /** 编辑 - 之前 */\r\n  beforeToEdit: 'beforeCrudToEdit',\r\n  /** 编辑 - 之后 */\r\n  afterToEdit: 'afterCrudToEdit',\r\n  /** 开始 \"新建/编辑\" - 之前 */\r\n  beforeToCU: 'beforeCrudToCU',\r\n  /** 开始 \"新建/编辑\" - 之后 */\r\n  afterToCU: 'afterCrudToCU',\r\n  /** \"新建/编辑\" 验证 - 之前 */\r\n  beforeValidateCU: 'beforeCrudValidateCU',\r\n  /** \"新建/编辑\" 验证 - 之后 */\r\n  afterValidateCU: 'afterCrudValidateCU',\r\n  /** 添加取消 - 之前 */\r\n  beforeAddCancel: 'beforeCrudAddCancel',\r\n  /** 添加取消 - 之后 */\r\n  afterAddCancel: 'afterCrudAddCancel',\r\n  /** 编辑取消 - 之前 */\r\n  beforeEditCancel: 'beforeCrudEditCancel',\r\n  /** 编辑取消 - 之后 */\r\n  afterEditCancel: 'afterCrudEditCancel',\r\n  /** 提交 - 之前 */\r\n  beforeSubmit: 'beforeCrudSubmitCU',\r\n  /** 提交 - 之后 */\r\n  afterSubmit: 'afterCrudSubmitCU',\r\n  afterAddError: 'afterCrudAddError',\r\n  afterEditError: 'afterCrudEditError'\r\n}\r\n\r\n/**\r\n * CRUD状态\r\n */\r\nCRUD.STATUS = {\r\n  NORMAL: 0,\r\n  PREPARED: 1,\r\n  PROCESSING: 2\r\n}\r\n\r\n/**\r\n * CRUD通知类型\r\n */\r\nCRUD.NOTIFICATION_TYPE = {\r\n  SUCCESS: 'success',\r\n  WARNING: 'warning',\r\n  INFO: 'info',\r\n  ERROR: 'error'\r\n}\r\n\r\nexport default CRUD\r\n\r\nexport {\r\n  presenter,\r\n  header,\r\n  form,\r\n  pagination,\r\n  crud\r\n}\r\n"],"mappings":"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"}]}